<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <changeSet id="calc-eug-1761" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_reg_result_lines_1</comment>
        <createTable tableName="calc_balance_reg_result_lines_1" schemaName="apps" remarks="Баланса производства, поступления, и потребления электроэнергии по региону - строки раздела 1">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="is_inverse" type="number" remarks="Флаг - изменить направление">
                <constraints nullable="false"/>
            </column>

            <column name="ap" type="number" remarks="Приём">
                <constraints nullable="true"/>
            </column>

            <column name="am" type="number" remarks="Отдача">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1762" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_reg_result_lines_1</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_reg_result_lines_1"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_1"/>
    </changeSet>

    <changeSet id="calc-eug-1763" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_reg_result_lines_1</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_reg_result_lines_1_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1764" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_1</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_1_1" schemaName="apps" tableName="calc_balance_reg_result_lines_1">
            <column name="result_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1765" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_1</comment>
        <createIndex indexName="idx_ccalc_balance_reg_result_lines_1_2" schemaName="apps" tableName="calc_balance_reg_result_lines_1">
            <column name="metering_point_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1766" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_1 to calc_balance_reg_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_1"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_balance_reg_result_lines_1_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1767" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_1 to calc_balance_reg_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_1"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_reg_result_lines_1_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-1768" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_reg_result_lines_1_tl</comment>
        <createTable tableName="calc_balance_reg_result_lines_1_tl" schemaName="apps" remarks="Баланса производства, поступления, и потребления электроэнергии по региону - строки раздела 1, перевод">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_line_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(300)" remarks="Наименование строки">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1769" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_reg_result_lines_1_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_reg_result_lines_1_tl"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_1_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1770" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_reg_result_lines_1_tl</comment>
        <addUniqueConstraint
                columnNames="result_line_id, lang"
                constraintName="uk_calc_balance_reg_result_lines_1_tl_1"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_1_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1771" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_reg_result_lines_1_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_reg_result_lines_1_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1772" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_1_tl</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_1_tl_1" schemaName="apps" tableName="calc_balance_reg_result_lines_1_tl">
            <column name="result_line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1773" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_1_tl to calc_balance_reg_result_lines_1</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_1_tl"
                baseColumnNames="result_line_id"
                constraintName="fk_calc_balance_reg_result_lines_1_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_lines_1"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-1774" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_reg_result_lines_2</comment>
        <createTable tableName="calc_balance_reg_result_lines_2" schemaName="apps" remarks="Баланса производства, поступления, и потребления электроэнергии по региону - строки раздела 2">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="true"/>
            </column>

            <column name="is_inverse" type="number" remarks="Флаг - изменить направление">
                <constraints nullable="false"/>
            </column>

            <column name="val" type="number" remarks="Отпуск в сеть">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1775" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_reg_result_lines_2</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_reg_result_lines_2"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_2"/>
    </changeSet>

    <changeSet id="calc-eug-1776" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_reg_result_lines_2</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_reg_result_lines_2_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1777" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_2</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_2_1" schemaName="apps" tableName="calc_balance_reg_result_lines_2">
            <column name="result_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1778" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_2</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_2_2" schemaName="apps" tableName="calc_balance_reg_result_lines_2">
            <column name="metering_point_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1779" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_2</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_2_3" schemaName="apps" tableName="calc_balance_reg_result_lines_2">
            <column name="param_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1780" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_2 to calc_balance_reg_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_2"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_balance_reg_result_lines_2_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1781" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_2 to calc_balance_reg_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_2"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_reg_result_lines_2_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1782" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_2 to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_2"
                baseColumnNames="param_id"
                constraintName="fk_calc_balance_reg_result_lines_2_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-1783" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_reg_result_lines_2_tl</comment>
        <createTable tableName="calc_balance_reg_result_lines_2_tl" schemaName="apps" remarks="Баланса производства, поступления, и потребления электроэнергии по региону - строки раздела 2, перевод">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_line_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(300)" remarks="Наименование строки">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1784" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_reg_result_lines_2_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_reg_result_lines_2_tl"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_2_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1785" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_reg_result_lines_2_tl</comment>
        <addUniqueConstraint
                columnNames="result_line_id, lang"
                constraintName="uk_calc_balance_reg_result_lines_2_tl_1"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_2_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1786" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_reg_result_lines_2_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_reg_result_lines_2_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1787" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_2_tl</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_2_tl_1" schemaName="apps" tableName="calc_balance_reg_result_lines_2_tl">
            <column name="result_line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1788" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_2_tl to calc_balance_reg_result_lines_2</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_2_tl"
                baseColumnNames="result_line_id"
                constraintName="fk_calc_balance_reg_result_lines_2_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_lines_2"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-1789" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_reg_result_lines_3</comment>
        <createTable tableName="calc_balance_reg_result_lines_3" schemaName="apps" remarks="Баланса производства, поступления, и потребления электроэнергии по региону - строки раздела 3">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="parent_id" type="number" remarks="Идентификатор родительской строки">
                <constraints nullable="true"/>
            </column>

            <column name="result_header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="true"/>
            </column>

            <column name="is_inverse" type="number" remarks="Флаг - изменить направление">
                <constraints nullable="false"/>
            </column>

            <column name="own_val" type="number" remarks="Сети КЕГОК">
                <constraints nullable="true"/>
            </column>

            <column name="other_val" type="number" remarks="Сети РЭК">
                <constraints nullable="true"/>
            </column>

            <column name="total_val" type="number" remarks="Всего">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1790" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_reg_result_lines_3</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_reg_result_lines_3"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_3"/>
    </changeSet>

    <changeSet id="calc-eug-1791" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_reg_result_lines_3</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_reg_result_lines_3_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1792" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_3</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_3_1" schemaName="apps" tableName="calc_balance_reg_result_lines_3">
            <column name="result_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1793" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_3</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_3_2" schemaName="apps" tableName="calc_balance_reg_result_lines_3">
            <column name="metering_point_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1794" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_3</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_3_3" schemaName="apps" tableName="calc_balance_reg_result_lines_3">
            <column name="param_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1795" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_3</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_3_4" schemaName="apps" tableName="calc_balance_reg_result_lines_3">
            <column name="parent_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1796" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3 to calc_balance_reg_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_balance_reg_result_lines_3_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1797" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3 to calc_balance_reg_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_reg_result_lines_3_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1798" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3 to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3"
                baseColumnNames="param_id"
                constraintName="fk_calc_balance_reg_result_lines_3_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1799" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3 to calc_balance_reg_result_lines_3</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3"
                baseColumnNames="parent_id"
                constraintName="fk_calc_balance_reg_result_lines_3_4"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_lines_3"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-1800" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_reg_result_lines_3_tl</comment>
        <createTable tableName="calc_balance_reg_result_lines_3_tl" schemaName="apps" remarks="Баланса производства, поступления, и потребления электроэнергии по региону - строки раздела 3, перевод">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_line_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(300)" remarks="Наименование строки">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1801" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_reg_result_lines_3_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_reg_result_lines_3_tl"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_3_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1802" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_reg_result_lines_3_tl</comment>
        <addUniqueConstraint
                columnNames="result_line_id, lang"
                constraintName="uk_calc_balance_reg_result_lines_3_tl_1"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_3_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1803" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_reg_result_lines_3_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_reg_result_lines_3_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1804" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_3_tl</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_3_tl_1" schemaName="apps" tableName="calc_balance_reg_result_lines_3_tl">
            <column name="result_line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1805" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3_tl to calc_balance_reg_result_lines_3</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3_tl"
                baseColumnNames="result_line_id"
                constraintName="fk_calc_balance_reg_result_lines_3_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_lines_3"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-1806" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_reg_result_lines_3_det</comment>
        <createTable tableName="calc_balance_reg_result_lines_3_det" schemaName="apps" remarks="Баланса производства, поступления, и потребления электроэнергии по региону - строки раздела 3, энергоисточники">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="result_line_id" type="number" remarks="Идентификатор строки">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор электростанции">
                <constraints nullable="true"/>
            </column>

            <column name="own_val" type="number" remarks="Сети КЕГОК">
                <constraints nullable="true"/>
            </column>

            <column name="other_val" type="number" remarks="Сети РЭК">
                <constraints nullable="true"/>
            </column>

            <column name="total_val" type="number" remarks="Всего">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1807" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_reg_result_lines_3_det</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_reg_result_lines_3_det"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_3_det"/>
    </changeSet>

    <changeSet id="calc-eug-1808" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_reg_result_lines_3_det</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_reg_result_lines_3_det_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1809" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_3_det</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_3_det_1" schemaName="apps" tableName="calc_balance_reg_result_lines_3_det">
            <column name="result_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1810" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_3_det</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_3_det_2" schemaName="apps" tableName="calc_balance_reg_result_lines_3_det">
            <column name="result_line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1811" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_3</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_3_det_3" schemaName="apps" tableName="calc_balance_reg_result_lines_3_det">
            <column name="energy_source_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1812" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3_det to calc_balance_reg_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3_det"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_balance_reg_result_lines_3_det_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1813" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3_det to calc_balance_reg_result_lines_3</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3_det"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_balance_reg_result_lines_3_det_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_lines_3"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1814" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3_det to dict_energy_sources</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3_det"
                baseColumnNames="energy_source_id"
                constraintName="fk_calc_balance_reg_result_lines_3_det_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_energy_sources"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-1815" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_reg_result_lines_4</comment>
        <createTable tableName="calc_balance_reg_result_lines_4" schemaName="apps" remarks="Баланс производства, поступления, и потребления электроэнергии по региону - строки раздела 4">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="dealer_id" type="number" remarks="Идентификатор посредника">
                <constraints nullable="true"/>
            </column>

            <column name="deal_type" type="varchar(30)" remarks="Код сделки">
                <constraints nullable="false"/>
            </column>

            <column name="val" type="number" remarks="Объём">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1816" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_reg_result_lines_4</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_reg_result_lines_4"
                schemaName="apps"
                tableName="calc_balance_reg_result_lines_4"/>
    </changeSet>

    <changeSet id="calc-eug-1817" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_reg_result_lines_4</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_reg_result_lines_4_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1818" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_4</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_4_1" schemaName="apps" tableName="calc_balance_reg_result_lines_4">
            <column name="result_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1819" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_4</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_4_2" schemaName="apps" tableName="calc_balance_reg_result_lines_4">
            <column name="metering_point_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1820" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_4</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_4_3" schemaName="apps" tableName="calc_balance_reg_result_lines_4">
            <column name="energy_source_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1821" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_reg_result_lines_4</comment>
        <createIndex indexName="idx_calc_balance_reg_result_lines_4_4" schemaName="apps" tableName="calc_balance_reg_result_lines_4">
            <column name="deal_type"  type="varchar2(30)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1822" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_4 to calc_balance_reg_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_4"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_balance_reg_result_lines_4_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_reg_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1823" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_4 to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_4"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_reg_result_lines_4_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1824" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_4 to dict_energy_sources</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_4"
                baseColumnNames="energy_source_id"
                constraintName="fk_calc_balance_reg_result_lines_4_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_energy_sources"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1825" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_4 to calc_deal_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_4"
                baseColumnNames="deal_type"
                constraintName="fk_calc_balance_reg_result_lines_4_4"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_deal_types"
                referencedColumnNames="code"
        />
    </changeSet>
</databaseChangeLog>