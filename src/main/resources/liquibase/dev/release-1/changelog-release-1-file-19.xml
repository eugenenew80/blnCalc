<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <changeSet id="calc-eug-1284" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_headers</comment>
        <createTable tableName="calc_loss_fact_headers" schemaName="apps" remarks="Шаблон для расчёта фактических потерь - заголовок">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="doc_type_code" type="varchar2(50)" remarks="Код типа документа">
                <constraints nullable="false"/>
            </column>

            <column name="template_id" type="number" remarks="На основе шаблона">
                <constraints nullable="true"/>
            </column>

            <column name="org_id" type="number" remarks="Идентификатор филиала">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Точка учёта отпуска прямым потребителям">
                <constraints nullable="true"/>
            </column>

            <column name="start_date" type="date" remarks="Действует с">
                <constraints nullable="true"/>
            </column>

            <column name="end_date" type="date" remarks="Действует по">
                <constraints nullable="true"/>
            </column>

            <column name="state_code" type="varchar2(20)" remarks="Статус шаблона">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1285" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_headers</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_headers"
                schemaName="apps"
                tableName="calc_loss_fact_headers"/>
    </changeSet>

    <changeSet id="calc-eug-1286" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_headers</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_headers_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1287" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_headers_1"
                     schemaName="apps"
                     tableName="calc_loss_fact_headers"
                     unique="false">
            <column name="template_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1288" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_headers_2"
                     schemaName="apps"
                     tableName="calc_loss_fact_headers"
                     unique="false">
            <column name="org_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1289" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_headers_3"
                     schemaName="apps"
                     tableName="calc_loss_fact_headers"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1290" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_headers_4"
                     schemaName="apps"
                     tableName="calc_loss_fact_headers"
                     unique="false">
            <column name="doc_type_code" type="varchar2(50)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1291" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_headers_5"
                     schemaName="apps"
                     tableName="calc_loss_fact_headers"
                     unique="false">
            <column name="state_code" type="varchar2(20)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1292" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_headers to dict_organizations</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_headers"
                baseColumnNames="org_id"
                constraintName="fk_calc_loss_fact_headers_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_organizations"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1293" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_headers to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_headers"
                baseColumnNames="org_id"
                constraintName="fk_calc_loss_fact_headers_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1294" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_headers to calc_loss_fact_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_headers"
                baseColumnNames="template_id"
                constraintName="fk_calc_loss_fact_headers_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1295" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_headers to dm_doc_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_headers"
                baseColumnNames="doc_type_code"
                constraintName="fk_calc_loss_fact_headers_4"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dm_doc_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1296" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_headers to wf_states</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_headers"
                baseColumnNames="state_code"
                constraintName="fk_calc_loss_fact_headers_5"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="wf_states"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1297" logicalFilePath="path-independent" author="ruslan" context="dev">
        <comment>Creating table: calc_loss_fact_sections</comment>
        <createTable tableName="calc_loss_fact_sections" schemaName="apps" remarks="Справочник разделов расчёта потерь">
            <column name="code" type="varchar2(30)" remarks="Код">
                <constraints nullable="false"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор обновления">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата обновления">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1298" logicalFilePath="path-independent" author="ruslan" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_sections</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_calc_loss_fact_sections"
                schemaName="apps"
                tableName="calc_loss_fact_sections"/>
    </changeSet>

    <changeSet id="calc-eug-1299" logicalFilePath="path-independent" author="ruslan" context="dev">
        <comment>Creating table: calc_loss_fact_sections_tl</comment>
        <createTable tableName="calc_loss_fact_sections_tl" schemaName="apps" remarks="Справочник разделов расчёта потерь - перевод">
            <column name="code" type="varchar2(30)" remarks="Код">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar2(10)" remarks="Язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar2(200)" remarks="Наименование">
                <constraints nullable="false"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор обновления">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата обновления">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1300" logicalFilePath="path-independent" author="ruslan" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_sections_tl</comment>
        <addPrimaryKey
                columnNames="code,lang"
                constraintName="pk_calc_loss_fact_sections_tl"
                schemaName="apps"
                tableName="calc_loss_fact_sections_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1301" logicalFilePath="path-independent" author="ruslan" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sections_tl to calc_loss_fact_sections</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sections_tl"
                baseColumnNames="code"
                constraintName="fk_calc_loss_fact_sections_tl_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_sections"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1302" logicalFilePath="path-independent" author="ruslan" context="dev">
        <comment>insert into calc_loss_fact_sections</comment>
        <insert schemaName="apps" tableName="calc_loss_fact_sections">
            <column name="code" type="varchar2" value="1.1"/>
        </insert>

        <insert schemaName="apps" tableName="calc_loss_fact_sections">
            <column name="code" type="varchar2" value="1.2"/>
        </insert>

        <insert schemaName="apps" tableName="calc_loss_fact_sections">
            <column name="code" type="varchar2" value="1.3"/>
        </insert>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-1303" logicalFilePath="path-independent" author="ruslan" context="dev">
        <comment>insert into calc_loss_fact_sections_tl</comment>
        <insert schemaName="apps" tableName="calc_loss_fact_sections_tl">
            <column name="code" type="varchar2" value="1.1"/>
            <column name="lang" type="varchar2" value="RU"/>
            <column name="name" type="varchar2" value="1.1 Межгосударственные ЛЭП"/>
        </insert>

        <insert schemaName="apps" tableName="calc_loss_fact_sections_tl">
            <column name="code" type="varchar2" value="1.1"/>
            <column name="lang" type="varchar2" value="KZ"/>
            <column name="name" type="varchar2" value="1.1 Межгосударственные ЛЭП"/>
        </insert>

        <insert schemaName="apps" tableName="calc_loss_fact_sections_tl">
            <column name="code" type="varchar2" value="1.2"/>
            <column name="lang" type="varchar2" value="RU"/>
            <column name="name" type="varchar2" value="1.2 Граничные точки АО KEGOC на территоррии Республики Казахстан"/>
        </insert>

        <insert schemaName="apps" tableName="calc_loss_fact_sections_tl">
            <column name="code" type="varchar2" value="1.2"/>
            <column name="lang" type="varchar2" value="KZ"/>
            <column name="name" type="varchar2" value="1.2 Граничные точки АО KEGOC на территоррии Республики Казахстан"/>
        </insert>

        <insert schemaName="apps" tableName="calc_loss_fact_sections_tl">
            <column name="code" type="varchar2" value="1.3"/>
            <column name="lang" type="varchar2" value="RU"/>
            <column name="name" type="varchar2" value="Хозяйственные нужды АО KEGOC, питаемые из сети АО KEGOC"/>
        </insert>

        <insert schemaName="apps" tableName="calc_loss_fact_sections_tl">
            <column name="code" type="varchar2" value="1.3"/>
            <column name="lang" type="varchar2" value="KZ"/>
            <column name="name" type="varchar2" value="Хозяйственные нужды АО KEGOC, питаемые из сети АО KEGOC"/>
        </insert>

        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-1304" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_sec1_lines</comment>
        <createTable tableName="calc_loss_fact_sec1_lines" schemaName="apps" remarks="Шаблон расчета потерь - строки раздела 1">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Точка учёта">
                <constraints nullable="false"/>
            </column>

            <column name="section_code" type="varchar2(30)" remarks="Раздел">
                <constraints nullable="false"/>
            </column>

            <column name="is_inverse" type="number" remarks="Инвертировать" defaultValue="0">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="date" remarks="Действует с">
                <constraints nullable="true"/>
            </column>

            <column name="end_date" type="date" remarks="Действует по">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1305" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_sec1_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_sec1_lines"
                schemaName="apps"
                tableName="calc_loss_fact_sec1_lines"/>
    </changeSet>

    <changeSet id="calc-eug-1306" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_sec1_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_sec1_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1307" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_sec1_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_sec1_lines_1"
                     schemaName="apps"
                     tableName="calc_loss_fact_sec1_lines"
                     unique="false">
            <column name="header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1308" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_sec1_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_sec1_lines_2"
                     schemaName="apps"
                     tableName="calc_loss_fact_sec1_lines"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1309" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_sec1_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_sec1_lines_3"
                     schemaName="apps"
                     tableName="calc_loss_fact_sec1_lines"
                     unique="false">
            <column name="section_code" type="varchar2(30)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1310" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sec1_lines to calc_loss_fact_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sec1_lines"
                baseColumnNames="header_id"
                constraintName="fk_calc_loss_fact_sec1_lines_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1311" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sec1_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sec1_lines"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_loss_fact_sec1_lines_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1312" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sec1_lines to calc_loss_fact_sections</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sec1_lines"
                baseColumnNames="section_code"
                constraintName="fk_calc_loss_fact_sec1_lines_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_sections"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1313" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_sec2_lines</comment>
        <createTable tableName="calc_loss_fact_sec2_lines" schemaName="apps" remarks="Шаблон расчета потерь - строки раздела 2">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Точка учёта">
                <constraints nullable="false"/>
            </column>

            <column name="org_id" type="number" remarks="Идентификатор филиала">
                <constraints nullable="false"/>
            </column>

            <column name="is_inverse" type="number" remarks="Инвертировать" defaultValue="0">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="date" remarks="Действует с">
                <constraints nullable="true"/>
            </column>

            <column name="end_date" type="date" remarks="Действует по">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1314" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_sec2_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_sec2_lines"
                schemaName="apps"
                tableName="calc_loss_fact_sec2_lines"/>
    </changeSet>

    <changeSet id="calc-eug-1315" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_sec2_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_sec2_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1316" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_sec2_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_sec2_lines_1"
                     schemaName="apps"
                     tableName="calc_loss_fact_sec2_lines"
                     unique="false">
            <column name="header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1317" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_sec2_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_sec2_lines_2"
                     schemaName="apps"
                     tableName="calc_loss_fact_sec2_lines"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1318" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_sec2_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_sec2_lines_3"
                     schemaName="apps"
                     tableName="calc_loss_fact_sec2_lines"
                     unique="false">
            <column name="org_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1319" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sec2_lines to calc_loss_fact_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sec2_lines"
                baseColumnNames="header_id"
                constraintName="fk_calc_loss_fact_sec2_lines_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1320" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sec2_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sec2_lines"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_loss_fact_sec2_lines_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1321" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sec2_lines to calc_loss_fact_sections</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sec2_lines"
                baseColumnNames="org_id"
                constraintName="fk_calc_loss_fact_sec2_lines_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_organizations"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1322" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_headers_tl</comment>
        <createTable tableName="calc_loss_fact_headers_tl" schemaName="apps" remarks="Перевод для заголовка шаблона расчёта фактических потерь">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="header_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(500)" remarks="Наименование шаблона">
                <constraints nullable="false"/>
            </column>
            
            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1323" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_headers_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_headers_tl"
                schemaName="apps"
                tableName="calc_loss_fact_headers_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1324" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_loss_fact_headers_tl</comment>
        <addUniqueConstraint
                columnNames="header_id, lang"
                constraintName="uk_calc_loss_fact_headers_tl_1"
                schemaName="apps"
                tableName="calc_loss_fact_headers_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1325" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_headers_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_headers_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1326" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_headers_tl</comment>
        <createIndex indexName="idx_calc_loss_fact_headers_tl_1" schemaName="apps" tableName="calc_loss_fact_headers_tl">
            <column name="header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1327" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_headers_tl to calc_loss_fact_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_headers_tl"
                baseColumnNames="header_id"
                constraintName="fk_calc_loss_fact_headers_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1328" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_result_headers</comment>
        <createTable tableName="calc_loss_fact_result_headers" schemaName="apps" remarks="Акт расчета фактических потерь - заголовок">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="loss_fact_header_id" type="number" remarks="Идентификатор шаблона">
                <constraints nullable="false"/>
            </column>

            <column name="is_active" type="number" defaultValue="0" remarks="Флаг - документ активирован">
                <constraints nullable="false"/>
            </column>

            <column name="period_type" type="varchar2(20)" remarks="Тип периода">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="date" remarks="Дата начала расчётного периода">
                <constraints nullable="false"/>
            </column>

            <column name="end_date" type="date" remarks="Дата окончания расчётного периода">
                <constraints nullable="false"/>
            </column>

            <column name="status" type="varchar2(30)" remarks="Статус формирования">
                <constraints nullable="true"/>
            </column>

            <column name="ap" type="number" remarks="Несальдированный приём">
                <constraints nullable="true"/>
            </column>

            <column name="am" type="number" remarks="Несальдированная выдача">
                <constraints nullable="true"/>
            </column>

            <column name="loss_fact" type="number" remarks="Потери">
                <constraints nullable="true"/>
            </column>

            <column name="state_code" type="varchar2(30)" remarks="Статус согласования">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1329" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_result_headers</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_result_headers"
                schemaName="apps"
                tableName="calc_loss_fact_result_headers"/>
    </changeSet>

    <changeSet id="calc-eug-1330" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_result_headers</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_result_headers_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1331" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_loss_fact_result_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_result_headers_1"
                     schemaName="apps"
                     tableName="calc_loss_fact_result_headers"
                     unique="false">
            <column name="loss_fact_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1332" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_result_headers_2"
                     schemaName="apps"
                     tableName="calc_loss_fact_result_headers"
                     unique="false">
            <column name="period_type" type="varchar2(20)" />
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1333" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_result_headers_3"
                     schemaName="apps"
                     tableName="calc_loss_fact_result_headers"
                     unique="false">
            <column name="status" type="varchar2(30)" />
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1334" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_headers</comment>
        <createIndex indexName="idx_calc_loss_fact_result_headers_4"
                     schemaName="apps"
                     tableName="calc_loss_fact_result_headers"
                     unique="false">
            <column name="state_code" type="varchar2(30)" />
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1335" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_headers to calc_loss_fact_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_headers"
                baseColumnNames="loss_fact_header_id"
                constraintName="fk_calc_loss_fact_result_headers_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1336" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_headers to calc_period_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_headers"
                baseColumnNames="period_type"
                constraintName="fk_calc_loss_fact_result_headers_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_period_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1337" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_headers to media_batch_statuses</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_headers"
                baseColumnNames="status"
                constraintName="fk_calc_loss_fact_result_headers_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_batch_statuses"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1338" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_headers to wf_states</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_headers"
                baseColumnNames="state_code"
                constraintName="fk_calc_loss_fact_result_headers_4"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="wf_states"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1339" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_result_headers_tl</comment>
        <createTable tableName="calc_loss_fact_result_headers_tl" schemaName="apps" remarks="Перевод для акта сверки расчётов по МГЛЭП - заголовок">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_header_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(500)" remarks="Наименование документа">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1340" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_result_headers_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_result_headers_tl"
                schemaName="apps"
                tableName="calc_loss_fact_result_headers_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1341" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_loss_fact_result_headers_tl</comment>
        <addUniqueConstraint
                columnNames="result_header_id, lang"
                constraintName="uk_calc_loss_fact_result_headers_tl_1"
                schemaName="apps"
                tableName="calc_loss_fact_result_headers_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1342" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_result_headers_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_result_headers_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1343" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_headers_tl</comment>
        <createIndex indexName="idx_calc_loss_fact_result_headers_tl_1" schemaName="apps" tableName="calc_loss_fact_result_headers_tl">
            <column name="result_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1344" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_headers_tl to calc_loss_fact_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_headers_tl"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_loss_fact_result_headers_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1345" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_formula_var_eq</comment>
        <createTable tableName="calc_formula_var_eq" schemaName="apps" remarks="Расшифровка для конкретного компонента формулы - характеристики оборудования">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="formula_id" type="number" remarks="Идентификатор формулы">
                <constraints nullable="false"/>
            </column>

            <column name="formula_var_id" type="number" remarks="Идентификатор компонента формулы">
                <constraints nullable="false"/>
            </column>

            <column name="equipment_type" type="varchar2(30)" remarks="Код типа оборудования">
                <constraints nullable="false"/>
            </column>

            <column name="equipment_id" type="number" remarks="Идентификатор оборудвания">
                <constraints nullable="false"/>
            </column>

            <column name="param_type" type="varchar2(30)" remarks="Код характеристики оборудования">
                <constraints nullable="false"/>
            </column>

            <column name="rate" type="number" remarks="Множитель">
                <constraints nullable="false"/>
            </column>

            <column name="sign" type="varchar2(1)" remarks="Знак">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1346" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_formula_var_eq</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_formula_var_eq"
                schemaName="apps"
                tableName="calc_formula_var_eq"/>
    </changeSet>

    <changeSet id="calc-eug-1347" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_formula_var_eq</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_formula_var_eq_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1348" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index for table: calc_formula_var_eq</comment>
        <createIndex indexName="idx_calc_formula_var_eq_1"
                     schemaName="apps"
                     tableName="calc_formula_var_eq"
                     unique="false">
            <column name="formula_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1349" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index for table: calc_formula_var_eq</comment>
        <createIndex indexName="idx_calc_formula_var_eq_2"
                     schemaName="apps"
                     tableName="calc_formula_var_eq"
                     unique="false">
            <column name="formula_var_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1350" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index for table: calc_formula_var_eq</comment>
        <createIndex indexName="idx_calc_formula_var_eq_3"
                     schemaName="apps"
                     tableName="calc_formula_var_eq"
                     unique="false">
            <column name="equipment_type" type="varchar2(30)"/>
            <column name="equipment_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1351" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_formula_var_eq</comment>
        <createIndex indexName="idx_calc_formula_var_eq_4"
                     schemaName="apps"
                     tableName="calc_formula_var_eq"
                     unique="false">
            <column name="param_type" type="varchar2(30)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1352" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_eq to calc_formulas</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_eq"
                baseColumnNames="formula_id"
                constraintName="fk_calc_formula_var_eq_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formulas"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1353" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_eq to calc_formula_vars</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_eq"
                baseColumnNames="formula_var_id"
                constraintName="fk_calc_formula_var_eq_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_vars"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1354" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_eq to calc_equipment_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_eq"
                baseColumnNames="equipment_type"
                constraintName="fk_calc_formula_var_eq_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_equipment_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1355" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_eq to calc_equipment_param_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_eq"
                baseColumnNames="param_type"
                constraintName="fk_calc_formula_var_eq_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_equipment_param_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1356" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_eq to calc_formula_signs</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_eq"
                baseColumnNames="sign"
                constraintName="fk_calc_formula_var_eq_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_signs"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1357" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_formula_var_types</comment>
        <createTable tableName="calc_formula_var_types" schemaName="apps" remarks="Типы кмпонентов формул">
            <column name="code" type="varchar2(30)" remarks="Код">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1358" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_formula_var_types</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_calc_formula_var_types"
                schemaName="apps"
                tableName="calc_formula_var_types"/>
    </changeSet>

    <changeSet id="calc-eug-1359" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_formula_var_types_tl</comment>
        <createTable tableName="calc_formula_var_types_tl" schemaName="apps" remarks="Типы компонентов формул - перевод">
            <column name="code" type="varchar2(30)" remarks="Код раздела">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Наименование">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1360" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_formula_var_types_tl</comment>
        <addPrimaryKey
                columnNames="code, lang"
                constraintName="pk_calc_formula_var_types_tl"
                schemaName="apps"
                tableName="calc_formula_var_types_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1361" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_types_tl to calc_formula_var_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_types_tl"
                baseColumnNames="code"
                constraintName="fk_calc_formula_var_types_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_var_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1362" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding data to table: calc_formula_var_types</comment>
        <insert tableName="calc_formula_var_types" schemaName="apps">
            <column name="code" value="MP" />
        </insert>

        <insert tableName="calc_formula_var_types" schemaName="apps">
            <column name="code" value="EQ" />
        </insert>

        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-1363" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding data to table: calc_formula_var_types_tl</comment>
        <insert tableName="calc_formula_var_types_tl" schemaName="apps">
            <column name="code" value="MP" />
            <column name="lang" value="RU" />
            <column name="name" value="Группа точек учёта" />
        </insert>

        <insert tableName="calc_formula_var_types_tl" schemaName="apps">
            <column name="code" value="MP" />
            <column name="lang" value="KZ" />
            <column name="name" value="Группа точек учёта" />
        </insert>

        <insert tableName="calc_formula_var_types_tl" schemaName="apps">
            <column name="code" value="EQ" />
            <column name="lang" value="RU" />
            <column name="name" value="Характеристика оборудования" />
        </insert>

        <insert tableName="calc_formula_var_types_tl" schemaName="apps">
            <column name="code" value="EQ" />
            <column name="lang" value="KZ" />
            <column name="name" value="Характеристика оборудования" />
        </insert>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-1364" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_formula_vars</comment>
        <addColumn tableName="calc_formula_vars" schemaName="apps">
            <column name="var_type" type="varchar2(30)" remarks="Тип компонента формулы">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1365" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_vars to calc_formula_var_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_vars"
                baseColumnNames="var_type"
                constraintName="fk_calc_formula_vars_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_var_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1366" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_bs_result_bp_lines</comment>
        <createTable tableName="calc_bs_result_bp_lines" schemaName="apps" remarks="Баланс по подстанции - показания и время переключения ОВ">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bs_result_header_id" type="number" remarks="Идентификатор заголовка расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="false"/>
            </column>

            <column name="bypass_metering_point_id" type="number" remarks="Идентификатор точки учёта ОВ">
                <constraints nullable="true"/>
            </column>

            <column name="meter_id" type="number" remarks="Идентификатор счётчика">
                <constraints nullable="false"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор счётчика">
                <constraints nullable="false"/>
            </column>

            <column name="start_metering_date" type="TIMESTAMP" remarks="Дата и время начальных показаний">
                <constraints nullable="false"/>
            </column>

            <column name="end_metering_date" type="TIMESTAMP" remarks="Дата и время конечных показаний">
                <constraints nullable="false"/>
            </column>

            <column name="bypass_start_date" type="TIMESTAMP" remarks="Дата и время перевода на ОВ">
                <constraints nullable="true"/>
            </column>

            <column name="bypass_end_date" type="TIMESTAMP" remarks="Дата и время перевода на собственный выключатель">
                <constraints nullable="true"/>
            </column>

            <column name="start_val" type="number" remarks="Показания на начало периода">
                <constraints nullable="true" />
            </column>

            <column name="end_val" type="number" remarks="Показания на конец периода">
                <constraints nullable="true" />
            </column>

            <column name="delta" type="number" remarks="Разность показаний">
                <constraints nullable="true" />
            </column>

            <column name="meter_rate" type="number" remarks="Коэффициент счетчика" defaultValue="0">
                <constraints nullable="true"/>
            </column>

            <column name="val" type="number" remarks="Расход за период">
                <constraints nullable="true" />
            </column>

            <column name="unit_id" type="number" remarks="Единица измерения">
                <constraints nullable="false" />
            </column>

            <column name="bypass_mode_id" type="number" remarks="Идентификатор записи в таблице переключений на ОВ">
                <constraints nullable="false" />
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1367" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_bs_result_bp_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_bs_result_bp_lines"
                schemaName="apps"
                tableName="calc_bs_result_bp_lines"/>
    </changeSet>

    <changeSet id="calc-eug-1368" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_bs_result_bp_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_bs_result_bp_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1369" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_bp_lines</comment>
        <createIndex indexName="idx_calc_bs_result_bp_lines_1"
                     schemaName="apps"
                     tableName="calc_bs_result_bp_lines"
                     unique="false">
            <column name="bs_result_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1370" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_bp_lines</comment>
        <createIndex indexName="idx_calc_bs_result_bp_lines_2"
                     schemaName="apps"
                     tableName="calc_bs_result_bp_lines"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1371" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_bp_lines</comment>
        <createIndex indexName="idx_calc_bs_result_bp_lines_3"
                     schemaName="apps"
                     tableName="calc_bs_result_bp_lines"
                     unique="false">
            <column name="meter_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1372" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_bp_lines</comment>
        <createIndex indexName="idx_calc_bs_result_bp_lines_4"
                     schemaName="apps"
                     tableName="calc_bs_result_bp_lines"
                     unique="false">
            <column name="unit_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1373" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_bp_lines</comment>
        <createIndex indexName="idx_calc_bs_result_bp_lines_5"
                     schemaName="apps"
                     tableName="calc_bs_result_bp_lines"
                     unique="false">
            <column name="bypass_metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1374" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_bp_lines</comment>
        <createIndex indexName="idx_calc_bs_result_bp_lines_6"
                     schemaName="apps"
                     tableName="calc_bs_result_bp_lines"
                     unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1375" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_bp_lines</comment>
        <createIndex indexName="idx_calc_bs_result_bp_lines_7"
                     schemaName="apps"
                     tableName="calc_bs_result_bp_lines"
                     unique="false">
            <column name="bypass_mode_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1376" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to bs_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="bs_result_header_id"
                constraintName="fk_calc_bs_result_bp_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_bs_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1377" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_bs_result_bp_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1378" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to dict_meters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="meter_id"
                constraintName="fk_calc_bs_result_bp_lines_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_meters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1379" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to dict_meters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="unit_id"
                constraintName="fk_calc_bs_result_bp_lines_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1380" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to dict_meters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="bypass_metering_point_id"
                constraintName="fk_calc_bs_result_bp_lines_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1381" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="param_id"
                constraintName="fk_calc_bs_result_bp_lines_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1382" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to calc_bypass_modes</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="param_id"
                constraintName="fk_calc_bs_result_bp_lines_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_bypass_modes"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1383" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_loss_fact_result_headers</comment>
        <addColumn tableName="calc_loss_fact_result_headers" schemaName="apps">
            <column name="r32" type="number" remarks="Полезный отпуск из сети МЭС всего, кВт.ч">
                <constraints nullable="true"/>
            </column>

            <column name="r321" type="number" remarks="Полезный отпуск прямым потребителям">
                <constraints nullable="true"/>
            </column>

            <column name="r322" type="number" remarks="Полезный отпуск соседним государствам">
                <constraints nullable="true"/>
            </column>

            <column name="r323" type="number" remarks="Полезный отпуск другим филиалам">
                <constraints nullable="true"/>
            </column>

            <column name="r324" type="number" remarks="Отпуск на хозяйственные нужды">
                <constraints nullable="true"/>
            </column>

            <column name="r325" type="number" remarks="Сальдированный прием в сеть филиала">
                <constraints nullable="true"/>
            </column>

            <column name="r326" type="number" remarks="Потери электроэнергии, в % от сальдиро-ванного приема">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1384" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_result_sec1_lines</comment>
        <createTable tableName="calc_loss_fact_result_sec1_lines" schemaName="apps" remarks="Расчет фактических потерь, раздел 1 - строки">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="section_code" type="varchar2(30)" remarks="Код раздела">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="is_inverse" type="number" remarks="Флаг - изменить направление">
                <constraints nullable="false"/>
            </column>

            <column name="ap" type="number" remarks="Несальдированный приём">
                <constraints nullable="true"/>
            </column>

            <column name="am" type="number" remarks="Несальдированная выдача">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1385" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_result_sec1_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_result_sec1_lines"
                schemaName="apps"
                tableName="calc_loss_fact_result_sec1_lines"/>
    </changeSet>

    <changeSet id="calc-eug-1386" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_result_sec1_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_result_sec1_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1387" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_sec1_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_result_sec1_lines_1" schemaName="apps" tableName="calc_loss_fact_result_sec1_lines">
            <column name="result_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1388" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_sec1_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_result_sec1_lines_2" schemaName="apps" tableName="calc_loss_fact_result_sec1_lines">
            <column name="section_code"  type="varchar2(30)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1389" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_sec1_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_result_sec1_lines_3" schemaName="apps" tableName="calc_loss_fact_result_sec1_lines">
            <column name="metering_point_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1390" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_sec1_lines to calc_loss_fact_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_sec1_lines"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_loss_fact_result_sec1_lines_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1391" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_sec1_lines to calc_loss_fact_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_sec1_lines"
                baseColumnNames="section_code"
                constraintName="fk_calc_loss_fact_result_sec1_lines_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_sections"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1392" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_sec1_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_sec1_lines"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_loss_fact_result_sec1_lines_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1393" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_result_sec2_lines</comment>
        <createTable tableName="calc_loss_fact_result_sec2_lines" schemaName="apps" remarks="Расчет фактических потерь, раздел 2 - строки">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="org_id" type="number" remarks="Идентификатор филиала">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="is_inverse" type="number" remarks="Флаг - изменить направление">
                <constraints nullable="false"/>
            </column>

            <column name="ap" type="number" remarks="Несальдированный приём">
                <constraints nullable="true"/>
            </column>

            <column name="am" type="number" remarks="Несальдированная выдача">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1394" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_result_sec2_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_result_sec2_lines"
                schemaName="apps"
                tableName="calc_loss_fact_result_sec2_lines"/>
    </changeSet>

    <changeSet id="calc-eug-1395" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_result_sec2_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_result_sec2_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1396" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_sec2_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_result_sec2_lines_1" schemaName="apps" tableName="calc_loss_fact_result_sec2_lines">
            <column name="result_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1397" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_sec2_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_result_sec2_lines_2" schemaName="apps" tableName="calc_loss_fact_result_sec2_lines">
            <column name="org_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1398" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_sec2_lines</comment>
        <createIndex indexName="idx_calc_loss_fact_result_sec2_lines_3" schemaName="apps" tableName="calc_loss_fact_result_sec2_lines">
            <column name="metering_point_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1399" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_sec2_lines to calc_loss_fact_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_sec2_lines"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_loss_fact_result_sec2_lines_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1400" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_sec2_lines to calc_loss_fact_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_sec2_lines"
                baseColumnNames="org_id"
                constraintName="fk_calc_loss_fact_result_sec2_lines_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1401" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_sec2_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_sec2_lines"
                baseColumnNames="result_header_id"
                constraintName="fk_calc_loss_fact_result_sec2_lines_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1402" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_bs_result_bp_lines</comment>
        <addColumn schemaName="apps"  tableName="calc_bs_result_bp_lines">
            <column name="meter_history_id" type="number" remarks="Идентификатор акта замены прибора учёта">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1403" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_bp_lines</comment>
        <createIndex indexName="idx_calc_bs_result_bp_lines_8"
                     schemaName="apps"
                     tableName="calc_bs_result_bp_lines"
                     unique="false">
            <column name="meter_history_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1404" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to mdfem_history</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="meter_history_id"
                constraintName="fk_calc_bs_result_bp_lines_8"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="mdfem_history"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1405" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Dropping foreign constraint: calc_bs_result_bp_lines to calc_bypass_modes</comment>
        <dropForeignKeyConstraint
            baseTableSchemaName="apps"
            baseTableName="calc_bs_result_bp_lines"
            constraintName="fk_calc_bs_result_bp_lines_7"
        />
    </changeSet>

    <changeSet id="calc-eug-1406" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_bp_lines to calc_bypass_modes</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_bp_lines"
                baseColumnNames="bypass_mode_id"
                constraintName="fk_calc_bs_result_bp_lines_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_bypass_modes"
                referencedColumnNames="id"
        />
    </changeSet>
</databaseChangeLog>
