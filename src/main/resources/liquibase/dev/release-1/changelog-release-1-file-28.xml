<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <changeSet id="calc-eug-1845" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_source_lines_f</comment>
        <createTable tableName="calc_balance_source_lines_f" schemaName="apps" remarks="Шаблон для баланса энергоисточника - строки">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="line_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="false"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="true"/>
            </column>

            <column name="rate" type="number" remarks="Множитель">
                <constraints nullable="false"/>
            </column>

            <column name="sign" type="varchar2(1)" remarks="Знак">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="date" remarks="Действует с">
                <constraints nullable="true"/>
            </column>

            <column name="end_date" type="date" remarks="Действует по">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1846" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_source_lines_f</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_source_lines_f"
                schemaName="apps"
                tableName="calc_balance_source_lines_f"/>
    </changeSet>

    <changeSet id="calc-eug-1847" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_source_lines_f</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_source_lines_f_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1848" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_source_lines_f</comment>
        <createIndex indexName="idx_calc_balance_source_lines_f_1"
                     schemaName="apps"
                     tableName="calc_balance_source_lines_f"
                     unique="false">
            <column name="header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1849" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_source_lines_f</comment>
        <createIndex indexName="idx_calc_balance_source_lines_f_2"
                     schemaName="apps"
                     tableName="calc_balance_source_lines_f"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1850" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_source_lines_f</comment>
        <createIndex indexName="idx_calc_balance_source_lines_f_3"
                     schemaName="apps"
                     tableName="calc_balance_source_lines_f"
                     unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1851" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_source_lines_f to calc_balance_source_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_source_lines_f"
                baseColumnNames="header_id"
                constraintName="fk_calc_balance_source_lines_f_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_source_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1852" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_source_lines_f to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_source_lines_f"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_source_lines_f_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1853" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_source_lines_f to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_source_lines_f"
                baseColumnNames="param_id"
                constraintName="fk_calc_balance_source_lines_f_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1854" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_source_lines_f to calc_formula_signs</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_source_lines_f"
                baseColumnNames="sign"
                constraintName="fk_calc_balance_source_lines_f_4"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_signs"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1855" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_source_lines_f_tl</comment>
        <createTable tableName="calc_balance_source_lines_f_tl" schemaName="apps" remarks="Перевод для строк баланса энергоисточника">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="line_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Наименование строки">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1856" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_source_lines_f_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_source_lines_f_tl"
                schemaName="apps"
                tableName="calc_balance_source_lines_f_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1857" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_source_lines_f_tl</comment>
        <addUniqueConstraint
                columnNames="line_id, lang"
                constraintName="uk_calc_balance_source_lines_f_tl_1"
                schemaName="apps"
                tableName="calc_balance_source_lines_f_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1858" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_source_lines_f_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_source_lines_f_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1859" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_source_lines_f_tl</comment>
        <createIndex indexName="idx_calc_balance_source_lines_f_tl_1" schemaName="apps" tableName="calc_balance_source_lines_f_tl">
            <column name="line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1860" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_source_lines_f_tl to calc_balance_source_lines_f</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_source_lines_f_tl"
                baseColumnNames="line_id"
                constraintName="fk_calc_balance_source_lines_f_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_source_lines_f"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1861" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_balance_reg_result_headers</comment>
        <addColumn schemaName="apps" tableName="calc_balance_reg_result_headers">
            <column name="data_type" type="varchar2(30)" remarks="Статус данных">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1862" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_headers to calc_data_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_headers"
                baseColumnNames="data_type"
                constraintName="fk_calc_balance_source_headers_9"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_data_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1863" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_distribution_result_h to calc_data_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_distribution_result_h"
                baseColumnNames="calc_type"
                constraintName="fk_calc_distribution_result_h_6"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_data_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1864" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_act_inter_pl_result_headers</comment>
        <addColumn schemaName="apps" tableName="calc_act_inter_pl_result_headers">
            <column name="data_type" type="varchar2(30)" remarks="Статус данных">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1865" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_act_inter_pl_result_headers to calc_data_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_act_inter_pl_result_headers"
                baseColumnNames="data_type"
                constraintName="fk_calc_act_inter_pl_result_headers_6"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_data_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1866" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_balance_segment_result_headers</comment>
        <addColumn schemaName="apps" tableName="calc_balance_segment_result_headers">
            <column name="data_type" type="varchar2(30)" remarks="Статус данных">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1867" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_segment_result_headers to calc_data_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_segment_result_headers"
                baseColumnNames="data_type"
                constraintName="fk_calc_balance_segment_result_headers_7"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_data_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1868" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_loss_fact_result_headers</comment>
        <addColumn schemaName="apps" tableName="calc_loss_fact_result_headers">
            <column name="data_type" type="varchar2(30)" remarks="Статус данных">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1869" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_headers to calc_data_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_headers"
                baseColumnNames="data_type"
                constraintName="fk_calc_loss_fact_result_headers_5"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_data_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1870" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Modify column dataЕype in table: calc_bs_result_nb_lines</comment>
        <modifyDataType schemaName="apps" tableName="calc_bs_result_nb_lines" columnName="tt_star" newDataType="varchar2(100)" />
    </changeSet>


    <changeSet id="calc-eug-1871" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: dict_power_transformers</comment>
        <addColumn schemaName="apps" tableName="dict_power_transformers">
            <column name="is_pkz_converted_to_h" type="number" remarks="Флаг - Паспортные значения потерь мощности короткого замыкания приведены к вводу ВН">
                <constraints nullable="true"/>
            </column>

            <column name="resist" type="number" remarks="Активное сопротивление, приведенное к вводу высшего напряжения 3-х обмоточного трансорматоа">
                <constraints nullable="true"/>
            </column>

            <column name="resist_h" type="number" remarks="Активное сопротивление, приведенное к вводу высшего напряжения">
                <constraints nullable="true"/>
            </column>

            <column name="resist_m" type="number" remarks="Активное сопротивление, приведенное к вводу среднего напряжения">
                <constraints nullable="true"/>
            </column>

            <column name="resist_l" type="number" remarks="Активное сопротивление, приведенное к вводу низшего напряжения">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1872" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_volume_determining_methods</comment>
        <createTable tableName="calc_volume_determining_methods" schemaName="apps" remarks="Способы определения объема оказанных услуг">
            <column name="code" type="varchar2(30)" remarks="Код правила">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1873" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_volume_determining_methods</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_calc_volume_determining_methods"
                schemaName="apps"
                tableName="calc_volume_determining_methods"/>
    </changeSet>

    <changeSet id="calc-eug-1874" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_volume_determining_methods_tl</comment>
        <createTable tableName="calc_volume_determining_methods_tl" schemaName="apps" remarks="Способы определения объема оказанных услуг - перевод">
            <column name="code" type="varchar2(30)" remarks="Код прввила">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Наименование правила">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1875" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_volume_determining_methods_tl</comment>
        <addPrimaryKey
                columnNames="code, lang"
                constraintName="pk_calc_volume_determining_methods_tl"
                schemaName="apps"
                tableName="calc_volume_determining_methods_tl"/>
    </changeSet>

    <changeSet id="calc-eug-1876" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_volume_determining_methods_tl to calc_volume_determining_methods</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_volume_determining_methods_tl"
                baseColumnNames="code"
                constraintName="fk_calc_volume_determining_methods_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_volume_determining_methods"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1877" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding data to table: calc_volume_determining_methods</comment>
        <insert tableName="calc_volume_determining_methods" schemaName="apps">
            <column name="code" value="MPV" />
        </insert>

        <insert tableName="calc_volume_determining_methods" schemaName="apps">
            <column name="code" value="RDV" />
        </insert>

        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-1878" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding data to table: calc_volume_determining_methods_tl</comment>
        <insert tableName="calc_volume_determining_methods_tl" schemaName="apps">
            <column name="code" value="MPV" />
            <column name="lang" value="RU" />
            <column name="name" value="По объему в точке учета" />
        </insert>

        <insert tableName="calc_volume_determining_methods_tl" schemaName="apps">
            <column name="code" value="MPV" />
            <column name="lang" value="KZ" />
            <column name="name" value="По объему в точке учета" />
        </insert>

        <insert tableName="calc_volume_determining_methods_tl" schemaName="apps">
            <column name="code" value="RDV" />
            <column name="lang" value="RU" />
            <column name="name" value="По результатам Паспределения электрической энергии" />
        </insert>

        <insert tableName="calc_volume_determining_methods_tl" schemaName="apps">
            <column name="code" value="RDV" />
            <column name="lang" value="KZ" />
            <column name="name" value="По результатам Паспределения электрической энергии" />
        </insert>

        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-1879" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_metering_point_settings</comment>
        <addColumn schemaName="apps" tableName="calc_metering_point_settings">
            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="true"/>
            </column>

            <column name="method_code" type="varchar2(30)" defaultValue="MPV" remarks="Способ определения объема">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1880" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_metering_point_settings to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_metering_point_settings"
                baseColumnNames="param_id"
                constraintName="fk_calc_metering_point_settings_4"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1881" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_metering_point_settings to calc_volume_determining_methods</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_metering_point_settings"
                baseColumnNames="method_code"
                constraintName="fk_calc_metering_point_settings_5"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_volume_determining_methods"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1882" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_service_values_reconciliations_l</comment>
        <addColumn schemaName="apps" tableName="calc_service_values_reconciliations_l">
            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="true"/>
            </column>

            <column name="data_type" type="varchar2(30)" remarks="Статус данных">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1883" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_metering_point_settings to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_service_values_reconciliations_l"
                baseColumnNames="param_id"
                constraintName="fk_calc_service_values_reconciliations_l_5"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1884" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_service_values_reconciliations_l to calc_data_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_service_values_reconciliations_l"
                baseColumnNames="data_type"
                constraintName="fk_calc_service_values_reconciliations_l_6"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_data_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1885" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_service_values_reconciliations</comment>
        <addColumn schemaName="apps" tableName="calc_service_values_reconciliations">
            <column name="data_type" type="varchar2(30)" remarks="Статус данных">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1886" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_service_values_reconciliations to calc_data_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_service_values_reconciliations"
                baseColumnNames="data_type"
                constraintName="fk_calc_service_values_reconciliations_9"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_data_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-1887" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Drop column column from table: calc_service_values_reconciliations</comment>
        <dropColumn schemaName="apps" tableName="calc_service_values_reconciliations" columnName="data_type_code" />
    </changeSet>

    <changeSet id="calc-eug-1888" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_act_inter_pl_result_lines</comment>
        <addColumn schemaName="apps" tableName="calc_act_inter_pl_result_lines">
            <column name="is_include_in_total" type="number" remarks="Включить в расчет Итого">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1889" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_act_inter_pl_lines</comment>
        <addColumn schemaName="apps" tableName="calc_act_inter_pl_lines">
            <column name="is_include_in_total" type="number" remarks="Включить в расчет Итого">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1990" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_balance_reg_lines_3</comment>
        <addColumn schemaName="apps" tableName="calc_balance_reg_lines_3">
            <column name="balance_unit_id" type="number" remarks="Идентификатор единицы баланса">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1991" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_lines_3 to calc_balance_units</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_lines_3"
                baseColumnNames="balance_unit_id"
                constraintName="fk_calc_balance_reg_lines_3_5"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1992" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_balance_reg_result_lines_3</comment>
        <addColumn schemaName="apps" tableName="calc_balance_reg_result_lines_3">
            <column name="balance_unit_id" type="number" remarks="Идентификатор единицы баланса">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-1993" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_reg_result_lines_3 to calc_balance_units</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_reg_result_lines_3"
                baseColumnNames="balance_unit_id"
                constraintName="fk_calc_balance_reg_result_lines_3_5"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-1994" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: mdfem_undercount_lines</comment>
        <createTable tableName="mdfem_undercount_lines" schemaName="apps" remarks="Акт недоучёта - объемы нежоучета">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="false"/>
            </column>

            <column name="pavg" type="number" remarks="Средняя мощность, кВт">
                <constraints nullable="true"/>
            </column>

            <column name="val" type="number" defaultValue="0" remarks="Объем недоучета, кВт.ч (кВар)">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-1995" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: mdfem_undercount_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_mdfem_undercount_lines"
                schemaName="apps"
                tableName="mdfem_undercount_lines"/>
    </changeSet>

    <changeSet id="calc-eug-1996" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: mdfem_undercount_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="mdfem_undercount_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-1997" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: mdfem_undercount_lines</comment>
        <createIndex indexName="idx_mdfem_undercount_lines_1"
                     schemaName="apps"
                     tableName="mdfem_undercount_lines"
                     unique="false">
            <column name="header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1998" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: mdfem_undercount_lines</comment>
        <createIndex indexName="idx_mdfem_undercount_lines_2"
                     schemaName="apps"
                     tableName="mdfem_undercount_lines"
                     unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-1999" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: mdfem_undercount_lines to mdfem_undercount_header</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="mdfem_undercount_lines"
                baseColumnNames="header_id"
                constraintName="fk_mdfem_undercount_lines_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="mdfem_undercount_header"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2000" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: mdfem_undercount_lines to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="mdfem_undercount_lines"
                baseColumnNames="param_id"
                constraintName="fk_mdfem_undercount_lines_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2001" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: mdfem_undercount_periods</comment>
        <createTable tableName="mdfem_undercount_periods" schemaName="apps" remarks="Акт недоучёта - расчет недоучтенной электроэнергии">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="false"/>
            </column>

            <column name="pavg" type="number" remarks="Средняя мощность, кВт">
                <constraints nullable="true"/>
            </column>

            <column name="val" type="number" defaultValue="0" remarks="Объем недоучета, кВт.ч (кВар)">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="TIMESTAMP" remarks="Дата и время начала периода">
                <constraints nullable="false"/>
            </column>

            <column name="end_date" type="TIMESTAMP" remarks="Дата и время окончания периода">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-2002" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: mdfem_undercount_periods</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_mdfem_undercount_periods"
                schemaName="apps"
                tableName="mdfem_undercount_periods"/>
    </changeSet>

    <changeSet id="calc-eug-2003" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: mdfem_undercount_periods</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="mdfem_undercount_periods_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-2004" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: mdfem_undercount_periods</comment>
        <createIndex indexName="idx_mdfem_undercount_periods_1"
                     schemaName="apps"
                     tableName="mdfem_undercount_periods"
                     unique="false">
            <column name="header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-2005" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: mdfem_undercount_periods</comment>
        <createIndex indexName="idx_mdfem_undercount_periods_2"
                     schemaName="apps"
                     tableName="mdfem_undercount_periods"
                     unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-2006" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: mdfem_undercount_periods to mdfem_undercount_header</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="mdfem_undercount_periods"
                baseColumnNames="header_id"
                constraintName="fk_mdfem_undercount_periods_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="mdfem_undercount_periods"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2007" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: mdfem_undercount_periods to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="mdfem_undercount_periods"
                baseColumnNames="param_id"
                constraintName="fk_mdfem_undercount_periods_2"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-2008" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_bs_result_nb_lines</comment>
        <addColumn schemaName="apps" tableName="calc_bs_result_nb_lines">
            <column name="tt_accuracy_class_id" type="number" remarks="Идентификатор класса точности трансформатора тока">
                <constraints nullable="true"/>
            </column>

            <column name="tn_accuracy_class_id" type="number" remarks="Идентификатор класса точности трансформатора напряжения">
                <constraints nullable="true"/>
            </column>

            <column name="meter_accuracy_class_id" type="number" remarks="Идентификатор класса точности счетчика">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-2009" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_nb_lines to dict_accurancy_classes</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_nb_lines"
                baseColumnNames="tt_accuracy_class_id"
                constraintName="fk_calc_bs_result_nb_lines_3"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_accurancy_classes"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2010" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_nb_lines to dict_accurancy_classes</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_nb_lines"
                baseColumnNames="tn_accuracy_class_id"
                constraintName="fk_calc_bs_result_nb_lines_4"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_accurancy_classes"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2011" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_nb_lines to dict_accurancy_classes</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_nb_lines"
                baseColumnNames="meter_accuracy_class_id"
                constraintName="fk_calc_bs_result_nb_lines_5"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_accurancy_classes"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2012" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_reactor_values</comment>
        <addColumn schemaName="apps" tableName="calc_reactor_values">
            <column name="is_losses" type="number" remarks="Флаг - Учитывать в Потери всего">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-2013" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_power_transformer_values</comment>
        <addColumn schemaName="apps" tableName="calc_power_transformer_values">
            <column name="is_losses" type="number" remarks="Флаг - Учитывать в Потери всего">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-2014" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_bypass_modes</comment>
        <addColumn schemaName="apps" tableName="calc_bypass_modes">
            <column name="energy_source_id" type="number" remarks="Идентификатор электростанции">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-2015" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bypass_modes</comment>
        <createIndex indexName="idx_calc_bypass_modes_4"
                     schemaName="apps"
                     tableName="calc_bypass_modes"
                     unique="false">
            <column name="energy_source_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-2016" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bypass_modes to dict_energy_sources</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bypass_modes"
                baseColumnNames="energy_source_id"
                constraintName="fk_calc_bypass_modes_4"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_energy_sources"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2017" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Drop not null constraint from table: calc_bypass_modes</comment>
        <dropNotNullConstraint schemaName="apps" tableName="calc_bypass_modes" columnName="substation_id" />
    </changeSet>

    <changeSet id="calc-eug-2018" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_result_sec1_lines_tl</comment>
        <createTable tableName="calc_loss_fact_result_sec1_lines_tl" schemaName="apps" remarks="Перевод к строкам раздела 1 документа Фактические потери">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_line_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(300)" remarks="Наименование строки">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-2019" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_result_sec1_lines_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_result_sec1_lines_tl"
                schemaName="apps"
                tableName="calc_loss_fact_result_sec1_lines_tl"/>
    </changeSet>

    <changeSet id="calc-eug-2020" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_loss_fact_result_sec1_lines_tl</comment>
        <addUniqueConstraint
                columnNames="result_line_id, lang"
                constraintName="uk_calc_loss_fact_result_sec1_lines_tl_1"
                schemaName="apps"
                tableName="calc_loss_fact_result_sec1_lines_tl"/>
    </changeSet>

    <changeSet id="calc-eug-2021" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_result_sec1_lines_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_result_sec1_lines_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-2022" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_sec1_lines_tl</comment>
        <createIndex indexName="idx_calc_loss_fact_result_sec1_lines_tl_1" schemaName="apps" tableName="calc_loss_fact_result_sec1_lines_tl">
            <column name="result_line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-2023" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_sec1_lines_tl to calc_loss_fact_result_sec1_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_sec1_lines_tl"
                baseColumnNames="result_line_id"
                constraintName="fk_calc_loss_fact_result_sec1_lines_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_result_sec1_lines"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2024" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_result_sec2_lines_tl</comment>
        <createTable tableName="calc_loss_fact_result_sec2_lines_tl" schemaName="apps" remarks="Перевод к строкам раздела 2 документа Фактические потери">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="result_line_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(300)" remarks="Наименование строки">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-2025" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_result_sec2_lines_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_result_sec2_lines_tl"
                schemaName="apps"
                tableName="calc_loss_fact_result_sec2_lines_tl"/>
    </changeSet>

    <changeSet id="calc-eug-2026" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_loss_fact_result_sec2_lines_tl</comment>
        <addUniqueConstraint
                columnNames="result_line_id, lang"
                constraintName="uk_calc_loss_fact_result_sec2_lines_tl_1"
                schemaName="apps"
                tableName="calc_loss_fact_result_sec2_lines_tl"/>
    </changeSet>

    <changeSet id="calc-eug-2027" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_result_sec2_lines_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_result_sec2_lines_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-2028" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_result_sec2_lines_tl</comment>
        <createIndex indexName="idx_calc_loss_fact_result_sec2_lines_tl_1" schemaName="apps" tableName="calc_loss_fact_result_sec2_lines_tl">
            <column name="result_line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-2029" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_result_sec2_lines_tl to calc_loss_fact_result_sec2_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_result_sec2_lines_tl"
                baseColumnNames="result_line_id"
                constraintName="fk_calc_loss_fact_result_sec2_lines_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_result_sec2_lines"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-2030" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_sec1_lines_tl</comment>
        <createTable tableName="calc_loss_fact_sec1_lines_tl" schemaName="apps" remarks="Перевод к строкам раздела 1 шаблона Фактические потери">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="line_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(300)" remarks="Наименование строки">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-2031" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_sec1_lines_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_sec1_lines_tl"
                schemaName="apps"
                tableName="calc_loss_fact_sec1_lines_tl"/>
    </changeSet>

    <changeSet id="calc-eug-2032" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_loss_fact_sec1_lines_tl</comment>
        <addUniqueConstraint
                columnNames="line_id, lang"
                constraintName="uk_calc_loss_fact_sec1_lines_tl_1"
                schemaName="apps"
                tableName="calc_loss_fact_sec1_lines_tl"/>
    </changeSet>

    <changeSet id="calc-eug-2033" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_sec1_lines_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_sec1_lines_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-2034" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_sec1_lines_tl</comment>
        <createIndex indexName="idx_calc_loss_fact_sec1_lines_tl_1" schemaName="apps" tableName="calc_loss_fact_sec1_lines_tl">
            <column name="line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-2035" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sec1_lines_tl to calc_loss_fact_sec1_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sec1_lines_tl"
                baseColumnNames="line_id"
                constraintName="fk_calc_loss_fact_sec1_lines_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_sec1_lines"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-2036" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_loss_fact_sec2_lines_tl</comment>
        <createTable tableName="calc_loss_fact_sec2_lines_tl" schemaName="apps" remarks="Перевод к строкам раздела 2 шаблона Фактические потери">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="line_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(300)" remarks="Наименование строки">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-2037" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_loss_fact_sec2_lines_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_loss_fact_sec2_lines_tl"
                schemaName="apps"
                tableName="calc_loss_fact_sec2_lines_tl"/>
    </changeSet>

    <changeSet id="calc-eug-2038" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_loss_fact_sec2_lines_tl</comment>
        <addUniqueConstraint
                columnNames="line_id, lang"
                constraintName="uk_calc_loss_fact_sec2_lines_tl_1"
                schemaName="apps"
                tableName="calc_loss_fact_sec2_lines_tl"/>
    </changeSet>

    <changeSet id="calc-eug-2039" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_loss_fact_sec2_lines_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_loss_fact_sec2_lines_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-2040" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_loss_fact_sec2_lines_tl</comment>
        <createIndex indexName="idx_calc_loss_fact_sec2_lines_tl_1" schemaName="apps" tableName="calc_loss_fact_sec2_lines_tl">
            <column name="line_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-2041" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_loss_fact_sec2_lines_tl to calc_loss_fact_sec2_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_loss_fact_sec2_lines_tl"
                baseColumnNames="line_id"
                constraintName="fk_calc_loss_fact_sec2_lines_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_loss_fact_sec2_lines"
                referencedColumnNames="id"
        />
    </changeSet>
</databaseChangeLog>