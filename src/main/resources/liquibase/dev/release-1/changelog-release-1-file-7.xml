<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <changeSet id="calc-eug-211" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_reactor_values</comment>
        <createTable tableName="calc_reactor_values" schemaName="apps" remarks="Значения рассчетных потерь в реакторах">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="reactor_id" type="number" remarks="Идентификатор реактора">
                <constraints nullable="false"/>
            </column>

            <column name="calc_date" type="TIMESTAMP" remarks="Дата и время расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="val" type="number" remarks="Значение">
                <constraints nullable="false"/>
            </column>

            <column name="input_mp_id" type="number" remarks="Идентификатор точки учёта для получения среднего напряжения">
                <constraints nullable="true"/>
            </column>

            <column name="delta_pr" type="number" remarks="Номинальные потери мощности">
                <constraints nullable="true"/>
            </column>

            <column name="unom" type="number" remarks="Номинальное значение напряжения">
                <constraints nullable="true"/>
            </column>

            <column name="uavg" type="number" remarks="Среднее значение напряжения">
                <constraints nullable="true"/>
            </column>

            <column name="operating_time" type="number" remarks="Время работы реактора">
                <constraints nullable="true"/>
            </column>

            <column name="status" type="varchar2(20)" remarks="Статус обработки">
                <constraints nullable="false"/>
            </column>

            <column name="unit_id" type="number" remarks="Идентификатор единицы измерения">
                <constraints nullable="false"/>
            </column>

            <column name="interval" type="number" remarks="Интервал расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="version" type="number" remarks="Версия расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="source_type_id" type="number" remarks="Идентификатор типа источника данных">
                <constraints nullable="false"/>
            </column>

            <column name="batch_id" type="number" remarks="Идентификатор пакета данных">
                <constraints nullable="true"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-212" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_reactor_values</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_reactor_values"
                schemaName="apps"
                tableName="calc_reactor_values"/>
    </changeSet>

    <changeSet id="calc-eug-213" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_reactor_values</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_reactor_values_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-214" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_reactor_values</comment>
        <createIndex indexName="idx_calc_reactor_values_1"
                     schemaName="apps"
                     tableName="calc_reactor_values"
                     unique="false">
            <column name="reactor_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-215" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_reactor_values</comment>
        <createIndex indexName="idx_calc_reactor_values_2"
                     schemaName="apps"
                     tableName="calc_reactor_values"
                     unique="false">
            <column name="input_mp_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-216" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_reactor_values</comment>
        <createIndex indexName="idx_calc_reactor_values_3"
                     schemaName="apps"
                     tableName="calc_reactor_values"
                     unique="false">
            <column name="unit_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-217" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_reactor_values</comment>
        <createIndex indexName="idx_calc_reactor_values_4"
                     schemaName="apps"
                     tableName="calc_reactor_values"
                     unique="false">
            <column name="status" type="varchar2(20)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-218" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_reactor_values</comment>
        <createIndex indexName="idx_calc_reactor_values_5"
                     schemaName="apps"
                     tableName="calc_reactor_values"
                     unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-219" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_reactor_values</comment>
        <createIndex indexName="idx_calc_reactor_values_6"
                     schemaName="apps"
                     tableName="calc_reactor_values"
                     unique="false">
            <column name="source_type_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-220" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_reactor_values</comment>
        <createIndex indexName="idx_calc_reactor_values_7"
                     schemaName="apps"
                     tableName="calc_reactor_values"
                     unique="false">
            <column name="batch_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-221" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_reactor_values to dict_reactors</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_reactor_values"
                baseColumnNames="reactor_id"
                constraintName="fk_calc_reactor_values_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_reactors"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-222" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_reactor_values to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_reactor_values"
                baseColumnNames="input_mp_id"
                constraintName="fk_calc_reactor_values_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-223" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_reactor_values to dict_units</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_reactor_values"
                baseColumnNames="unit_id"
                constraintName="fk_calc_reactor_values_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-224" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_reactor_values to media_processing_statuses</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_reactor_values"
                baseColumnNames="status"
                constraintName="fk_calc_reactor_values_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_processing_statuses"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-225" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_reactor_values to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_reactor_values"
                baseColumnNames="param_id"
                constraintName="fk_calc_reactor_values_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-226" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_reactor_values to media_source_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_reactor_values"
                baseColumnNames="source_type_id"
                constraintName="fk_calc_reactor_values_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_source_types"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-227" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_reactor_values to media_batches</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_reactor_values"
                baseColumnNames="batch_id"
                constraintName="fk_calc_reactor_values_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_batches"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-228" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_power_transformer_values</comment>
        <createTable tableName="calc_power_transformer_values" schemaName="apps" remarks="Значения рассчетных потерь в силовых трансформаторах">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="power_transformer_id" type="number" remarks="Идентификатор силового трансформатора">
                <constraints nullable="false"/>
            </column>

            <column name="calc_date" type="TIMESTAMP" remarks="Дата и время расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="val" type="number" remarks="Значение">
                <constraints nullable="false"/>
            </column>

            <column name="val_xx" type="number" remarks="Потери холостого хода">
                <constraints nullable="true"/>
            </column>

            <column name="val_n" type="number" remarks="Нагрузочные потери">
                <constraints nullable="true"/>
            </column>

            <column name="windings_number" type="number" remarks="Количество обмоток в трансформаторах тока">
                <constraints nullable="true"/>
            </column>

            <column name="input_mp_id" type="number" remarks="точка учета фиксирующия на вводе ВН">
                <constraints nullable="true"/>
            </column>

            <column name="input_mp_id_h" type="number" remarks="Ид точки учета для Ввод ВН">
                <constraints nullable="true"/>
            </column>

            <column name="input_mp_id_m" type="number" remarks="Ид точки учета для Ввод СН">
                <constraints nullable="true"/>
            </column>

            <column name="input_mp_id_l" type="number" remarks="Ид точки учета для Ввод НН">
                <constraints nullable="true"/>
            </column>

            <column name="delta_pxx" type="number" remarks="Номинальные потери холостого хода">
                <constraints nullable="true"/>
            </column>

            <column name="unom_h" type="number" remarks="Номинальное значение напряжения">
                <constraints nullable="true"/>
            </column>

            <column name="snom" type="number" remarks="Номинальная мощность трансформатора">
                <constraints nullable="true"/>
            </column>

            <column name="operating_time" type="number" remarks="Время работы трансформатора">
                <constraints nullable="true"/>
            </column>

            <column name="uavg" type="number" remarks="Среднее значение напряжения">
                <constraints nullable="true"/>
            </column>

            <column name="pkz_hm" type="number" remarks="Потери короткого замыкания для пары обмоток высшего и среднего напряжений">
                <constraints nullable="true"/>
            </column>

            <column name="pkz_hl" type="number" remarks="Потери короткого замыкания для пары обмоток высшего и низшего напряжений">
                <constraints nullable="true"/>
            </column>

            <column name="pkz_ml" type="number" remarks="Потери короткого замыкания для пары обмоток среднего и низшего напряжений">
                <constraints nullable="true"/>
            </column>

            <column name="resist_h" type="number" remarks="Активное сопротивление на высокой стороне">
                <constraints nullable="true"/>
            </column>

            <column name="resist_m" type="number" remarks="Активное сопротивление на средней стороне">
                <constraints nullable="true"/>
            </column>

            <column name="resist_l" type="number" remarks="Активное сопротивление на низкой стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_e_h" type="number" remarks="Суммарная несальдированная энергия на высокой стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_ae_h" type="number" remarks="Суммарная несальдированная активная энергия на высокой стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_re_h" type="number" remarks="Суммарная несальдированная реактивная энергия на высокой стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_e_m" type="number" remarks="Суммарная несальдированная энергия на средней стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_ae_m" type="number" remarks="Суммарная несальдированная активная энергия на средней стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_re_m" type="number" remarks="Суммарная несальдированная реактивная энергия на средней стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_e_l" type="number" remarks="Суммарная несальдированная энергия на низкой стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_ae_l" type="number" remarks="Суммарная несальдированная активная энергия на низкой стороне">
                <constraints nullable="true"/>
            </column>

            <column name="total_re_l" type="number" remarks="Суммарная несальдированная реактивная энергия на низкой стороне">
                <constraints nullable="true"/>
            </column>


            <column name="status" type="varchar2(20)" remarks="Статус обработки">
                <constraints nullable="false"/>
            </column>

            <column name="unit_id" type="number" remarks="Идентификатор единицы измерения">
                <constraints nullable="false"/>
            </column>

            <column name="interval" type="number" remarks="Интервал расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="version" type="number" remarks="Версия расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="source_type_id" type="number" remarks="Идентификатор типа источника данных">
                <constraints nullable="false"/>
            </column>

            <column name="batch_id" type="number" remarks="Идентификатор пакета данных">
                <constraints nullable="true"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-229" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_power_transformer_values</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_power_transformer_values"
                schemaName="apps"
                tableName="calc_power_transformer_values"/>
    </changeSet>

    <changeSet id="calc-eug-230" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_power_transformer_values</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_power_transformer_values_s"
                startValue="1"/>
    </changeSet>


    <changeSet id="calc-eug-231" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_1"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="power_transformer_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-232" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_2"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="input_mp_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-233" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_3"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="input_mp_id_h" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-234" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_4"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="input_mp_id_m" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-235" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_5"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="input_mp_id_l" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-236" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_6"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="unit_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-237" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_7"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="status" type="varchar2(20)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-238" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_8"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-239" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_9"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="source_type_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-240" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_10"
                     schemaName="apps"
                     tableName="calc_power_transformer_values"
                     unique="false">
            <column name="batch_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-241" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to dict_power_transformers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="power_transformer_id"
                constraintName="fk_calc_power_transformer_values_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_power_transformers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-242" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="input_mp_id"
                constraintName="fk_calc_power_transformer_values_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-243" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="input_mp_id_h"
                constraintName="fk_calc_power_transformer_values_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-244" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="input_mp_id_m"
                constraintName="fk_calc_power_transformer_values_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-245" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="input_mp_id_l"
                constraintName="fk_calc_power_transformer_values_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-246" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to dict_units</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="unit_id"
                constraintName="fk_calc_power_transformer_values_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-247" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to media_processing_statuses</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="status"
                constraintName="fk_calc_power_transformer_values_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_processing_statuses"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-248" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="param_id"
                constraintName="fk_calc_power_transformer_values_8"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-249" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to media_source_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="source_type_id"
                constraintName="fk_calc_power_transformer_values_9"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_source_types"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-250" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to media_batches</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="batch_id"
                constraintName="fk_calc_power_transformer_values_10"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_batches"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-251" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_tasks</comment>
        <createTable tableName="calc_tasks" schemaName="apps" remarks="Задачи для выполнения расчётов">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="doc_code" type="varchar2(1)" remarks="Код документа для расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="TIMESTAMP" remarks="Дата начала расчёта">
                <constraints nullable="true"/>
            </column>

            <column name="end_date" type="TIMESTAMP" remarks="Дата окончания расчёта">
                <constraints nullable="true"/>
            </column>

            <column name="priority" type="number" remarks="Приоритет расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-252" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_tasks</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_tasks"
                schemaName="apps"
                tableName="calc_tasks"/>
    </changeSet>

    <changeSet id="calc-eug-253" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_tasks</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_tasks_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-254" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_task_params</comment>
        <createTable tableName="calc_task_params" schemaName="apps" remarks="Параметры для выполнения задачи">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="task_id" type="number" remarks="Идентификатор задачи">
                <constraints nullable="false"/>
            </column>

            <column name="org_id" type="number" remarks="Идентификатор филиала">
                <constraints nullable="true"/>
            </column>

            <column name="substation_id" type="number" remarks="Идентификатор подстанции">
                <constraints nullable="true"/>
            </column>

            <column name="reactor_id" type="number" remarks="Идентификатор реактора">
                <constraints nullable="true"/>
            </column>

            <column name="power_transformer_id" type="number" remarks="Идентификатор трансформатора">
                <constraints nullable="true"/>
            </column>

            <column name="power_line_id" type="number" remarks="Идентификатор ЛЭП">
                <constraints nullable="true"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="start_date" type="date" remarks="Дата начала расчётного периода">
                <constraints nullable="true"/>
            </column>

            <column name="end_date" type="date" remarks="Дата окончания расчётного периода">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-255" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_task_params</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_task_params"
                schemaName="apps"
                tableName="calc_task_params"/>
    </changeSet>

    <changeSet id="calc-eug-256" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_task_params</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_task_params_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-257" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_task_params</comment>
        <createIndex indexName="idx_calc_task_params_1"
                     schemaName="apps"
                     tableName="calc_task_params"
                     unique="false">
            <column name="task_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-258" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_task_params</comment>
        <createIndex indexName="idx_calc_task_params_2"
                     schemaName="apps"
                     tableName="calc_task_params"
                     unique="false">
            <column name="org_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-259" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_task_params</comment>
        <createIndex indexName="idx_calc_task_params_3"
                     schemaName="apps"
                     tableName="calc_task_params"
                     unique="false">
            <column name="substation_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-260" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_task_params</comment>
        <createIndex indexName="idx_calc_task_params_4"
                     schemaName="apps"
                     tableName="calc_task_params"
                     unique="false">
            <column name="reactor_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-261" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_task_params</comment>
        <createIndex indexName="idx_calc_task_params_5"
                     schemaName="apps"
                     tableName="calc_task_params"
                     unique="false">
            <column name="power_transformer_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-262" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_task_params</comment>
        <createIndex indexName="idx_calc_task_params_6"
                     schemaName="apps"
                     tableName="calc_task_params"
                     unique="false">
            <column name="power_line_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-263" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_task_params</comment>
        <createIndex indexName="idx_calc_task_params_7"
                     schemaName="apps"
                     tableName="calc_task_params"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-264" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_task_params to calc_tasks</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_task_params"
                baseColumnNames="task_id"
                constraintName="fk_calc_task_params_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_tasks"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-265" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_task_params to dict_organizations</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_task_params"
                baseColumnNames="org_id"
                constraintName="fk_calc_task_params_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_organizations"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-266" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_task_params to dict_substations</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_task_params"
                baseColumnNames="substation_id"
                constraintName="fk_calc_task_params_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_substations"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-267" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_task_params to dict_reactors</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_task_params"
                baseColumnNames="reactor_id"
                constraintName="fk_calc_task_params_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_reactors"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-268" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_task_params to dict_power_transformers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_task_params"
                baseColumnNames="power_transformer_id"
                constraintName="fk_calc_task_params_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_power_transformers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-269" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_task_params to dict_power_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_task_params"
                baseColumnNames="power_line_id"
                constraintName="fk_calc_task_params_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_power_lines"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-270" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_task_params to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_task_params"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_task_params_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-271" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_headers</comment>
        <createTable tableName="calc_balance_subst_headers" schemaName="apps" remarks="Шаблоны для составления баланса по подстанциям - заголовок">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="substation_id" type="number" remarks="Идентификатор подстанции">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-272" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_headers</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_headers"
                schemaName="apps"
                tableName="calc_balance_subst_headers"/>
    </changeSet>

    <changeSet id="calc-eug-273" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_headers</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_headers_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-274" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_headers</comment>
        <createIndex indexName="idx_calc_balance_subst_headers_1"
                     schemaName="apps"
                     tableName="calc_balance_subst_headers"
                     unique="false">
            <column name="substation_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-275" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_headers to dict_substations</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_headers"
                baseColumnNames="substation_id"
                constraintName="fk_calc_balance_subst_headers_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_substations"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-276" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_headers</comment>
        <createTable tableName="calc_balance_subst_lines" schemaName="apps" remarks="Строки для составления баланса по подстанции">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_header_id" type="number" remarks="Идентификатор заголовка шаблона">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="false"/>
            </column>

            <column name="is_inverse" type="number" remarks="Инвертировать направление">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_1" type="number" remarks="Включить точку учёта в раздел: Поступление на шины подстанции">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_2" type="number" remarks="Включить точку учёта в раздел: Расход на собственные нужды">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_3" type="number" remarks="Включить точку учёта в раздел: Расход на хозяйственные нужды">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_4" type="number" remarks="Включить точку учёта в раздел: Отпуск с шин подстанции">
                <constraints nullable="false"/>
            </column>

            <column name="note_order" type="number" remarks="Порядок вывода">
                <constraints nullable="true"/>
            </column>

            <column name="note" type="varchar2(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-277" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_lines"
                schemaName="apps"
                tableName="calc_balance_subst_lines"/>
    </changeSet>

    <changeSet id="calc-eug-278" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-279" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_lines_1"
                     schemaName="apps"
                     tableName="calc_balance_subst_lines"
                     unique="false">
            <column name="balance_subst_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-280" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_lines_2"
                     schemaName="apps"
                     tableName="calc_balance_subst_lines"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-281" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_lines to calc_balance_subst_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_lines"
                baseColumnNames="balance_subst_header_id"
                constraintName="fk_calc_balance_subst_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-282" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_lines"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_subst_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-283" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_mr_lines</comment>
        <createTable tableName="`" schemaName="apps" remarks="Строки для составления акта съема показаний">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_header_id" type="number" remarks="Идентификатор заголовка шаблона">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="false"/>
            </column>

            <column name="is_inverse" type="number" remarks="Инвертировать направление">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_1" type="number" remarks="Включить точку учёта в раздел: ЛЭП">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_2" type="number" remarks="Включить точку учёта в раздел: Трансформаторы/автотрансформаторы">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_3" type="number" remarks="Включить точку учёта в раздел: Собственные нужды">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_4" type="number" remarks="Включить точку учёта в раздел: Хозяйственные нужды">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_5" type="number" remarks="Включить точку учёта в раздел: Обходные выключатели">
                <constraints nullable="false"/>
            </column>

            <column name="note_order" type="number" remarks="Порядок вывода">
                <constraints nullable="true"/>
            </column>

            <column name="note" type="varchar2(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-284" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_mr_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_mr_lines"
                schemaName="apps"
                tableName="calc_balance_subst_mr_lines"/>
    </changeSet>

    <changeSet id="calc-eug-285" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_mr_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_mr_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-286" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_mr_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_mr_lines_1"
                     schemaName="apps"
                     tableName="calc_balance_subst_mr_lines"
                     unique="false">
            <column name="balance_subst_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-287" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_mr_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_mr_lines_2"
                     schemaName="apps"
                     tableName="calc_balance_subst_mr_lines"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-288" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_mr_lines to calc_balance_subst_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_mr_lines"
                baseColumnNames="balance_subst_header_id"
                constraintName="fk_calc_balance_subst_mr_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-289" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_mr_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_mr_lines"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_subst_mr_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-290" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_ub_lines</comment>
        <createTable tableName="calc_balance_subst_ub_lines" schemaName="apps" remarks="Строки для расчёта небаланса">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_header_id" type="number" remarks="Идентификатор заголовка шаблона">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="false"/>
            </column>

            <column name="is_inverse" type="number" remarks="Инвертировать направление">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_1" type="number" remarks="Включить точку учёта в раздел: ЛЭП">
                <constraints nullable="false"/>
            </column>

            <column name="is_section_2" type="number" remarks="Включить точку учёта в раздел: Трансформаторы/автотрансформаторы">
                <constraints nullable="false"/>
            </column>

            <column name="note_order" type="number" remarks="Порядок вывода">
                <constraints nullable="true"/>
            </column>

            <column name="note" type="varchar2(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-291" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_ub_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_ub_lines"
                schemaName="apps"
                tableName="calc_balance_subst_ub_lines"/>
    </changeSet>

    <changeSet id="calc-eug-292" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_ub_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_ub_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-293" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_ub_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_ub_lines_1"
                     schemaName="apps"
                     tableName="calc_balance_subst_ub_lines"
                     unique="false">
            <column name="balance_subst_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-294" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_ub_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_ub_lines_2"
                     schemaName="apps"
                     tableName="calc_balance_subst_ub_lines"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-295" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_ub_lines to calc_balance_subst_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_ub_lines"
                baseColumnNames="balance_subst_header_id"
                constraintName="fk_calc_balance_subst_ub_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-296" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_ub_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_ub_lines"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_subst_ub_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-297" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_pe_lines</comment>
        <createTable tableName="calc_balance_subst_pe_lines" schemaName="apps" remarks="Строки для расчёта небаланса">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_header_id" type="number" remarks="Идентификатор заголовка шаблона">
                <constraints nullable="false"/>
            </column>

            <column name="reactor_id" type="number" remarks="Идентификатор реактора">
                <constraints nullable="true"/>
            </column>

            <column name="power_transformer_id" type="number" remarks="Идентификатор силового трансформатора">
                <constraints nullable="true"/>
            </column>

            <column name="is_balance" type="number" remarks="Учитывать в балансе ПС">
                <constraints nullable="false"/>
            </column>

            <column name="note_order" type="number" remarks="Порядок вывода">
                <constraints nullable="true"/>
            </column>

            <column name="note" type="varchar2(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-298" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_pe_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_pe_lines"
                schemaName="apps"
                tableName="calc_balance_subst_pe_lines"/>
    </changeSet>

    <changeSet id="calc-eug-299" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_pe_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_pe_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-300" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_pe_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_pe_lines_1"
                     schemaName="apps"
                     tableName="calc_balance_subst_pe_lines"
                     unique="false">
            <column name="balance_subst_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-301" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_pe_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_pe_lines_2"
                     schemaName="apps"
                     tableName="calc_balance_subst_pe_lines"
                     unique="false">
            <column name="reactor_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-302" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_pe_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_pe_lines_3"
                     schemaName="apps"
                     tableName="calc_balance_subst_pe_lines"
                     unique="false">
            <column name="power_transformer_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-303" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_pe_lines to calc_balance_subst_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_pe_lines"
                baseColumnNames="balance_subst_header_id"
                constraintName="fk_calc_balance_subst_pe_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-304" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_pe_lines to dict_reactors</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_pe_lines"
                baseColumnNames="reactor_id"
                constraintName="fk_calc_balance_subst_pe_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_reactors"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-305" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_pe_lines to dict_power_transformers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_pe_lines"
                baseColumnNames="power_transformer_id"
                constraintName="fk_calc_balance_subst_pe_lines_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_power_transformers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-306" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table calc_tasks</comment>
        <addColumn tableName="calc_tasks" schemaName="apps">
            <column name="doc_id" type="number" remarks="Идентификатор шаблона документа" defaultValue="1">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-307" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Change column in table calc_tasks</comment>
        <modifyDataType
            tableName="calc_tasks"
            schemaName="apps"
            columnName="doc_code"
            newDataType="varchar2(30)"
        />
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-308" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_u_lines</comment>
        <createTable tableName="calc_balance_subst_u_lines" schemaName="apps" remarks="Строки для расчёта средних напряжений">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_header_id" type="number" remarks="Идентификатор заголовка шаблона">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="false"/>
            </column>

            <column name="ti_num" type="number" remarks="Номер ТИ в ОИК">
                <constraints nullable="false"/>
            </column>

            <column name="ti_name" type="varchar(100)" remarks="Наименование ТИ в ОИК">
                <constraints nullable="false"/>
            </column>

            <column name="note_order" type="number" remarks="Порядок вывода">
                <constraints nullable="true"/>
            </column>

            <column name="note" type="varchar2(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-309" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_u_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_u_lines"
                schemaName="apps"
                tableName="calc_balance_subst_u_lines"/>
    </changeSet>

    <changeSet id="calc-eug-310" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_u_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_u_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-311" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_u_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_u_lines_1"
                     schemaName="apps"
                     tableName="calc_balance_subst_u_lines"
                     unique="false">
            <column name="balance_subst_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-312" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_u_lines</comment>
        <createIndex indexName="idx_calc_balance_subst_u_lines_2"
                     schemaName="apps"
                     tableName="calc_balance_subst_u_lines"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-313" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_u_lines to calc_balance_subst_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_u_lines"
                baseColumnNames="balance_subst_header_id"
                constraintName="fk_calc_balance_subst_u_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-314" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_u_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_u_lines"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_subst_u_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-315" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_lines_tl</comment>
        <createTable tableName="calc_balance_subst_lines_tl" schemaName="apps" remarks="Перевод - примечания для баланса по ПС">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_line_id" type="number" remarks="Идентификатор строки баланса">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="note" type="varchar(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <rollback/>
    </changeSet>


    <changeSet id="calc-eug-316" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_lines_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_lines_tl"
                schemaName="apps"
                tableName="calc_balance_subst_lines_tl"/>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-317" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_subst_lines_tl</comment>
        <addUniqueConstraint
                columnNames="balance_subst_line_id, lang"
                constraintName="uk_calc_balance_subst_lines_tl_1"
                schemaName="apps"
                tableName="calc_balance_subst_lines_tl"/>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-318" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_lines_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_lines_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-319" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_subst_lines_tl</comment>
        <createIndex indexName="idx_calc_balance_subst_lines_tl_1" schemaName="apps" tableName="calc_balance_subst_lines_tl">
            <column name="balance_subst_line_id"  type="number"/>
        </createIndex>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-320" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_lines_tl to calc_balance_subst_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_lines_tl"
                baseColumnNames="balance_subst_line_id"
                constraintName="fk_calc_balance_subst_lines_tl_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_lines"
                referencedColumnNames="id"
        />
        <rollback/>
    </changeSet>


    <changeSet id="calc-eug-321" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_mr_lines_tl</comment>
        <createTable tableName="calc_balance_subst_mr_lines_tl" schemaName="apps" remarks="Перевод - примечания для акта съёма показаний по ПС">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_mr_line_id" type="number" remarks="Идентификатор строки акта">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="note" type="varchar(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-322" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_mr_lines_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_mr_lines_tl"
                schemaName="apps"
                tableName="calc_balance_subst_mr_lines_tl"/>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-323" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_subst_mr_lines_tl</comment>
        <addUniqueConstraint
                columnNames="balance_subst_mr_line_id, lang"
                constraintName="uk_calc_balance_subst_mr_lines_tl_1"
                schemaName="apps"
                tableName="calc_balance_subst_mr_lines_tl"/>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-324" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_mr_lines_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_lines_mr_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-325" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_subst_mr_lines_tl</comment>
        <createIndex indexName="idx_calc_balance_subst_mr_lines_tl_1" schemaName="apps" tableName="calc_balance_subst_mr_lines_tl">
            <column name="balance_subst_mr_line_id"  type="number"/>
        </createIndex>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-326" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_mr_lines_tl to calc_balance_subst_mr_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_mr_lines_tl"
                baseColumnNames="balance_subst_mr_line_id"
                constraintName="fk_calc_balance_subst_mr_lines_tl_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_mr_lines"
                referencedColumnNames="id"
        />
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-327" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_ub_lines_tl</comment>
        <createTable tableName="calc_balance_subst_ub_lines_tl" schemaName="apps" remarks="Перевод - примечания для небаланса по ПС">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_ub_line_id" type="number" remarks="Идентификатор строки небаланса">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="note" type="varchar(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-328" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_ub_lines_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_ub_lines_tl"
                schemaName="apps"
                tableName="calc_balance_subst_ub_lines_tl"/>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-329" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_subst_ub_lines_tl</comment>
        <addUniqueConstraint
                columnNames="balance_subst_ub_line_id, lang"
                constraintName="uk_calc_balance_subst_ub_lines_tl_1"
                schemaName="apps"
                tableName="calc_balance_subst_ub_lines_tl"/>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-330" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_ub_lines_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_lines_ub_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-331" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_subst_ub_lines_tl</comment>
        <createIndex indexName="idx_calc_balance_subst_ub_lines_tl_1" schemaName="apps" tableName="calc_balance_subst_ub_lines_tl">
            <column name="balance_subst_ub_line_id"  type="number"/>
        </createIndex>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-332" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_ub_lines_tl to calc_balance_subst_ub_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_ub_lines_tl"
                baseColumnNames="balance_subst_ub_line_id"
                constraintName="fk_calc_balance_subst_ub_lines_tl_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_ub_lines"
                referencedColumnNames="id"
        />
        <rollback/>
    </changeSet>


    <changeSet id="calc-eug-333" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_pe_lines_tl</comment>
        <createTable tableName="calc_balance_subst_pe_lines_tl" schemaName="apps" remarks="Перевод - примечания силового оборудования">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_pe_line_id" type="number" remarks="Идентификатор строки силового оборудования">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="note" type="varchar(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-334" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_pe_lines_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_pe_lines_tl"
                schemaName="apps"
                tableName="calc_balance_subst_pe_lines_tl"/>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-335" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_subst_pe_lines_tl</comment>
        <addUniqueConstraint
                columnNames="balance_subst_pe_line_id, lang"
                constraintName="uk_calc_balance_subst_pe_lines_tl_1"
                schemaName="apps"
                tableName="calc_balance_subst_pe_lines_tl"/>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-336" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_pe_lines_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_lines_pe_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-337" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_subst_pe_lines_tl</comment>
        <createIndex indexName="idx_calc_balance_subst_pe_lines_tl_1" schemaName="apps" tableName="calc_balance_subst_pe_lines_tl">
            <column name="balance_subst_pe_line_id"  type="number"/>
        </createIndex>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-338" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_pe_lines_tl to calc_balance_subst_pe_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_pe_lines_tl"
                baseColumnNames="balance_subst_pe_line_id"
                constraintName="fk_calc_balance_subst_pe_lines_tl_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_pe_lines"
                referencedColumnNames="id"
        />
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-339" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding fields for table: calc_bypass_modes</comment>
        <addColumn tableName="calc_bypass_modes" schemaName="apps">
            <column name="is_bus_section" type="number" defaultValue="0" remarks="Флаг - включен между секциями шин">
                <constraints nullable="false"/>
            </column>

            <column name="bus_section_reason" type="varchar2(300)" remarks="Причина включения ОВ между секциями шин">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>


    <changeSet id="calc-eug-340" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_notes</comment>
        <createTable tableName="calc_balance_subst_notes" schemaName="apps" remarks="Примечания для баланса по ПС">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_header_id" type="number" remarks="Идентификатор заголовка шаблона">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="note_order" type="number" remarks="Порядок вывода">
                <constraints nullable="false"/>
            </column>

            <column name="note" type="varchar2(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-341" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_notes</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_notes"
                schemaName="apps"
                tableName="calc_balance_subst_notes"/>
    </changeSet>

    <changeSet id="calc-eug-342" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_notes</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_notes_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-343" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_notes</comment>
        <createIndex indexName="idx_calc_balance_subst_notes_1"
                     schemaName="apps"
                     tableName="calc_balance_subst_notes"
                     unique="false">
            <column name="balance_subst_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-344" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_notes</comment>
        <createIndex indexName="idx_calc_balance_subst_notes_2"
                     schemaName="apps"
                     tableName="calc_balance_subst_notes"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-345" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_notes to calc_balance_subst_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_notes"
                baseColumnNames="balance_subst_header_id"
                constraintName="fk_calc_balance_subst_notes_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-346" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_notes to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_notes"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_subst_notes_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-347" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_notes_tl</comment>
        <createTable tableName="calc_balance_subst_notes_tl" schemaName="apps" remarks="Примечания для баланса по ПС - переводы">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_note_id" type="number" remarks="Идентификатор строки примечаний">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="note" type="varchar(300)" remarks="Примечание">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-348" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_notes_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_notes_tl"
                schemaName="apps"
                tableName="calc_balance_subst_notes_tl"/>
    </changeSet>

    <changeSet id="calc-eug-349" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_subst_notes_tl</comment>
        <addUniqueConstraint
                columnNames="balance_subst_note_id, lang"
                constraintName="uk_calc_balance_subst_notes_tl_1"
                schemaName="apps"
                tableName="calc_balance_subst_notes_tl"/>
    </changeSet>

    <changeSet id="calc-eug-350" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_notes_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_notes_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-351" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_subst_notes_tl</comment>
        <createIndex indexName="idx_calc_balance_subst_notes_tl_1" schemaName="apps" tableName="calc_balance_subst_notes_tl">
            <column name="balance_subst_note_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-352" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_notes_tl to calc_balance_subst_notes</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_notes_tl"
                baseColumnNames="balance_subst_note_id"
                constraintName="fk_calc_balance_subst_notes_tl_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_notes"
                referencedColumnNames="id"
        />
    </changeSet>



    <changeSet id="calc-eug-353" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_mr_notes</comment>
        <createTable tableName="calc_balance_subst_mr_notes" schemaName="apps" remarks="Примечания для акта съёма показаний по ПС">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_header_id" type="number" remarks="Идентификатор заголовка шаблона">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="true"/>
            </column>

            <column name="note_order" type="number" remarks="Порядок вывода">
                <constraints nullable="false"/>
            </column>

            <column name="note" type="varchar2(300)" remarks="Примечание">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-354" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_mr_notes</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_mr_notes"
                schemaName="apps"
                tableName="calc_balance_subst_mr_notes"/>
    </changeSet>

    <changeSet id="calc-eug-355" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_mr_notes</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_mr_notes_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-356" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_mr_notes</comment>
        <createIndex indexName="idx_calc_balance_subst_mr_notes_1"
                     schemaName="apps"
                     tableName="calc_balance_subst_mr_notes"
                     unique="false">
            <column name="balance_subst_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-357" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_mr_notes</comment>
        <createIndex indexName="idx_calc_balance_subst_mr_notes_2"
                     schemaName="apps"
                     tableName="calc_balance_subst_mr_notes"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-358" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_mr_notes to calc_balance_subst_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_mr_notes"
                baseColumnNames="balance_subst_header_id"
                constraintName="fk_calc_balance_subst_mr_notes_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-359" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_mr_notes to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_mr_notes"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_balance_subst_mr_notes_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-360" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_balance_subst_mr_notes_tl</comment>
        <createTable tableName="calc_balance_subst_mr_notes_tl" schemaName="apps" remarks="Примечания для акта по ПС - переводы">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_mr_note_id" type="number" remarks="Идентификатор строки примечаний">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="note" type="varchar(300)" remarks="Примечание">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-361" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_balance_subst_mr_notes_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_balance_subst_mr_notes_tl"
                schemaName="apps"
                tableName="calc_balance_subst_mr_notes_tl"/>
    </changeSet>

    <changeSet id="calc-eug-362" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: calc_balance_subst_mr_notes_tl</comment>
        <addUniqueConstraint
                columnNames="balance_subst_mr_note_id, lang"
                constraintName="uk_calc_balance_subst_mr_notes_tl_1"
                schemaName="apps"
                tableName="calc_balance_subst_mr_notes_tl"/>
    </changeSet>

    <changeSet id="calc-eug-363" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_balance_subst_mr_notes_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_balance_subst_mr_notes_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-364" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: calc_balance_subst_mr_notes_tl</comment>
        <createIndex indexName="idx_calc_balance_subst_mr_notes_tl_1" schemaName="apps" tableName="calc_balance_subst_mr_notes_tl">
            <column name="balance_subst_mr_note_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-365" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_mr_notes_tl to calc_balance_subst_mr_notes</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_mr_notes_tl"
                baseColumnNames="balance_subst_mr_note_id"
                constraintName="fk_calc_balance_subst_mr_notes_tl_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_mr_notes"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-366" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop columns from table: calc_balance_subst_lines</comment>
        <dropColumn tableName="calc_balance_subst_lines" schemaName="apps" >
            <column name="note_order" />
            <column name="note" />
        </dropColumn>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-367" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop columns from table: calc_balance_subst_mr_lines</comment>
        <dropColumn tableName="calc_balance_subst_mr_lines" schemaName="apps" >
            <column name="note_order" />
            <column name="note" />
        </dropColumn>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-368" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop columns from table: calc_balance_subst_ub_lines</comment>
        <dropColumn tableName="calc_balance_subst_ub_lines" schemaName="apps" >
            <column name="note_order" />
            <column name="note" />
        </dropColumn>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-369" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop columns from table: calc_balance_subst_pe_lines</comment>
        <dropColumn tableName="calc_balance_subst_pe_lines" schemaName="apps" >
            <column name="note_order" />
            <column name="note" />
        </dropColumn>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-370" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop table: calc_balance_subst_lines_tl</comment>
        <dropTable tableName="calc_balance_subst_lines_tl" schemaName="apps" />
        <rollback />
    </changeSet>

    <changeSet id="calc-eug-371" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop table: calc_balance_subst_mr_lines_tl</comment>
        <dropTable tableName="calc_balance_subst_mr_lines_tl" schemaName="apps" />
        <rollback />
    </changeSet>

    <changeSet id="calc-eug-372" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop table: calc_balance_subst_ub_lines_tl</comment>
        <dropTable tableName="calc_balance_subst_ub_lines_tl" schemaName="apps" />
        <rollback />
    </changeSet>

    <changeSet id="calc-eug-373" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop table: calc_balance_subst_pe_lines_tl</comment>
        <dropTable tableName="calc_balance_subst_pe_lines_tl" schemaName="apps" />
        <rollback />
    </changeSet>

    <changeSet id="calc-eug-374" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table calc_balance_subst_headers</comment>
        <addColumn tableName="calc_balance_subst_headers" schemaName="apps">
            <column name="description" type="varchar2(300)" remarks="Комментарий к шаблону">
                <constraints nullable="true"/>
            </column>
            <column name="is_default" type="number" remarks="Применять данный шаблон по умолчанию" defaultValue="0">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-375" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_metering_data_source_types</comment>
        <createTable tableName="calc_metering_data_source_types" schemaName="apps" remarks="Типы источников данных для съема показаний">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar2(100)" remarks="Наименование">
                <constraints nullable="false"/>
            </column>

            <column name="priority" type="number" remarks="Приоритет источника данных">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-376" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_metering_data_source_types</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_metering_data_source_types"
                schemaName="apps"
                tableName="calc_metering_data_source_types"/>
    </changeSet>

    <changeSet id="calc-eug-377" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_metering_data_source_types</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_metering_data_source_types_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-378" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_metering_data_sources</comment>
        <addColumn tableName="calc_metering_data_sources" schemaName="apps">
            <column name="metering_data_source_type_id" type="number" remarks="Идентификатор типа источника данных">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-379" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_metering_data_sources</comment>
        <createIndex indexName="idx_calc_metering_data_sources_2"
                     schemaName="apps"
                     tableName="calc_metering_data_sources"
                     unique="false">
            <column name="metering_data_source_type_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-380" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_metering_data_sources to calc_metering_data_source_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_metering_data_sources"
                baseColumnNames="metering_data_source_type_id"
                constraintName="fk_calc_metering_data_sources_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_metering_data_source_types"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-381" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_period_types</comment>
        <createTable tableName="calc_period_types" schemaName="apps" remarks="Типы периодов для ввода показаний счётчмков">
            <column name="code" type="varchar2(10)" remarks="Код">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar2(100)" remarks="Наименование">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-382" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_period_types</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_calc_period_types"
                schemaName="apps"
                tableName="calc_period_types"/>
    </changeSet>

    <changeSet id="calc-eug-383" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_daily_sheet_headers to calc_period_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_daily_sheet_headers"
                baseColumnNames="period_type"
                constraintName="fk_calc_daily_sheet_headers_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_period_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-384" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table calc_daily_sheet_lines</comment>
        <addColumn tableName="calc_daily_sheet_lines" schemaName="apps">
            <column name="meter_rate" type="number" remarks="Коэффициент счетчика" defaultValue="0">
                <constraints nullable="false"/>
            </column>

            <column name="is_ignore" type="number" remarks="Игнорировать показания" defaultValue="0">
                <constraints nullable="false"/>
            </column>

            <column name="is_manual_start_val" type="number" remarks="Флаг - разрешено вручную указать начальное показание счётчика" defaultValue="0">
                <constraints nullable="false"/>
            </column>

            <column name="start_metering_date" type="TIMESTAMP" remarks="Дата и время предыдущих показаний">
                <constraints nullable="false"/>
            </column>

            <column name="end_metering_date" type="TIMESTAMP" remarks="Дата и время текущих показаний">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-385" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop columns from table: calc_daily_sheet_lines</comment>
        <dropColumn tableName="calc_daily_sheet_lines" schemaName="apps" >
            <column name="is_oper" />
        </dropColumn>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-386" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_reactor_values</comment>
        <createTable tableName="calc_bs_result_headers" schemaName="apps" remarks="Результат расчёта баланса по ПС - заголовок">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="balance_subst_header_id" type="number" remarks="Идентификатор шаблона настройки баланса">
                <constraints nullable="false"/>
            </column>

            <column name="substation_id" type="number" remarks="Идентификатор подстанции">
                <constraints nullable="false"/>
            </column>

            <column name="period_type" type="varchar2(20)" remarks="Тип периода">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="date" remarks="Дата начала расчётного периода">
                <constraints nullable="false"/>
            </column>

            <column name="end_date" type="date" remarks="Дата окончания расчётного периода">
                <constraints nullable="false"/>
            </column>

            <column name="status" type="varchar2(30)" remarks="Статус формирования">
                <constraints nullable="true"/>
            </column>

            <column name="state" type="varchar2(30)" remarks="Статус согласования">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-387" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_bs_result_headers</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_bs_result_headers"
                schemaName="apps"
                tableName="calc_bs_result_headers"/>
    </changeSet>

    <changeSet id="calc-eug-388" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_bs_result_headers</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_bs_result_headers_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-389" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_headers</comment>
        <createIndex indexName="idx_calc_bs_result_headers_1"
                     schemaName="apps"
                     tableName="calc_bs_result_headers"
                     unique="false">
            <column name="balance_subst_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-390" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_headers</comment>
        <createIndex indexName="idx_calc_bs_result_headers_2"
                     schemaName="apps"
                     tableName="calc_bs_result_headers"
                     unique="false">
            <column name="substation_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-391" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_headers</comment>
        <createIndex indexName="idx_calc_bs_result_headers_3"
                     schemaName="apps"
                     tableName="calc_bs_result_headers"
                     unique="false">
            <column name="period_type" type="varchar2(20)" />
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-392" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_headers to calc_balance_subst_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_headers"
                baseColumnNames="balance_subst_header_id"
                constraintName="fk_calc_bs_result_headers_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_balance_subst_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-393" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_headers to dict_substations</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_headers"
                baseColumnNames="substation_id"
                constraintName="fk_calc_bs_result_headers_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_substations"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-394" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_headers to dict_substations</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_headers"
                baseColumnNames="period_type"
                constraintName="fk_calc_bs_result_headers_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_period_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-395" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_reactor_values</comment>
        <createTable tableName="calc_bs_result_mr_lines" schemaName="apps" remarks="Результат расчёта акта по ПС - строки">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="section" type="varchar2(2)" remarks="Раздел">
                <constraints nullable="false"/>
            </column>

            <column name="bs_result_header_id" type="number" remarks="Идентификатор заголовка расчёта">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="false"/>
            </column>

            <column name="meter_id" type="number" remarks="Идентификатор счётчика">
                <constraints nullable="false"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор счётчика">
                <constraints nullable="false"/>
            </column>

            <column name="start_metering_date" type="TIMESTAMP" remarks="Дата и время начальных показаний">
                <constraints nullable="false"/>
            </column>

            <column name="end_metering_date" type="TIMESTAMP" remarks="Дата и время конечных показаний">
                <constraints nullable="false"/>
            </column>

            <column name="start_val" type="number" remarks="Показания на начало периода">
                <constraints nullable="true" />
            </column>

            <column name="end_val" type="number" remarks="Показания на конец периода">
                <constraints nullable="true" />
            </column>

            <column name="delta" type="number" remarks="Разность показаний">
                <constraints nullable="true" />
            </column>

            <column name="meter_rate" type="number" remarks="Коэффициент счетчика" defaultValue="0">
                <constraints nullable="true"/>
            </column>

            <column name="val" type="number" remarks="Расход за период">
                <constraints nullable="true" />
            </column>

            <column name="unit_id" type="number" remarks="Единица измерения">
                <constraints nullable="false" />
            </column>

            <column name="is_ignore" type="number" remarks="Игнорируется при вычислениии общего расхода">
                <constraints nullable="false" />
            </column>

            <column name="bypass_metering_point_id" type="number" remarks="Идентификатор точки учёта ОВ">
                <constraints nullable="true"/>
            </column>

            <column name="is_bypass_bus_section" type="number" remarks="ОВ включен на другие СШ">
                <constraints nullable="false"/>
            </column>

            <column name="under_count_id" type="number" remarks="Идентификатор акта недоучёта">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-396" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_bs_result_mr_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_bs_result_mr_lines"
                schemaName="apps"
                tableName="calc_bs_result_mr_lines"/>
    </changeSet>

    <changeSet id="calc-eug-397" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_bs_result_mr_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_calc_bs_result_mr_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-398" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_mr_lines</comment>
        <createIndex indexName="idx_calc_bs_result_mr_lines_1"
                     schemaName="apps"
                     tableName="calc_bs_result_mr_lines"
                     unique="false">
            <column name="bs_result_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-399" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_mr_lines</comment>
        <createIndex indexName="idx_calc_bs_result_mr_lines_2"
                     schemaName="apps"
                     tableName="calc_bs_result_mr_lines"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-400" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_mr_lines</comment>
        <createIndex indexName="idx_calc_bs_result_mr_lines_3"
                 schemaName="apps"
                 tableName="calc_bs_result_mr_lines"
                 unique="false">
            <column name="meter_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-401" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_mr_lines</comment>
        <createIndex indexName="idx_calc_bs_result_mr_lines_4"
                 schemaName="apps"
                 tableName="calc_bs_result_mr_lines"
                 unique="false">
            <column name="unit_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-402" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_mr_lines</comment>
        <createIndex indexName="idx_calc_bs_result_mr_lines_5"
                 schemaName="apps"
                 tableName="calc_bs_result_mr_lines"
                 unique="false">
            <column name="bypass_metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-403" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_mr_lines</comment>
        <createIndex indexName="idx_calc_bs_result_mr_lines_6"
                 schemaName="apps"
                 tableName="calc_bs_result_mr_lines"
                 unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-404" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_mr_lines</comment>
        <createIndex indexName="idx_calc_bs_result_mr_lines_7"
                 schemaName="apps"
                 tableName="calc_bs_result_mr_lines"
                 unique="false">
            <column name="under_count_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-405" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_mr_lines to bs_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_mr_lines"
                baseColumnNames="bs_result_header_id"
                constraintName="fk_calc_bs_result_mr_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_bs_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-406" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_mr_lines to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_mr_lines"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_bs_result_mr_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-407" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_mr_lines to dict_meters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_mr_lines"
                baseColumnNames="meter_id"
                constraintName="fk_calc_bs_result_mr_lines_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_meters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-408" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_mr_lines to dict_meters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_mr_lines"
                baseColumnNames="unit_id"
                constraintName="fk_calc_bs_result_mr_lines_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-409" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_mr_lines to dict_meters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_mr_lines"
                baseColumnNames="bypass_metering_point_id"
                constraintName="fk_calc_bs_result_mr_lines_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-410" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_mr_lines to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_mr_lines"
                baseColumnNames="param_id"
                constraintName="fk_calc_bs_result_mr_lines_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-411" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_mr_lines to mdfem_undercount_header</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_mr_lines"
                baseColumnNames="under_count_id"
                constraintName="fk_calc_bs_result_mr_lines_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="mdfem_undercount_header"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-412" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding columns to table: calc_formulas</comment>
        <addColumn tableName="calc_formulas" schemaName="apps">
            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="false"/>
            </column>

            <column name="formula_type" type="varchar2(30)" remarks="Тип формулы">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-413" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_formulas</comment>
        <createIndex indexName="idx_calc_formulas_2"
                     schemaName="apps"
                     tableName="calc_formulas"
                     unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-414" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formulas to media_parameters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formulas"
                baseColumnNames="param_id"
                constraintName="fk_calc_formulas_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-415" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_formula_vars</comment>
        <createTable tableName="calc_formula_vars" schemaName="apps" remarks="Компоненты формулы">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="formula_id" type="number" remarks="Идентификатор формулы">
                <constraints nullable="false"/>
            </column>

            <column name="var_name" type="varchar2(2)" remarks="Обозначение">
                <constraints nullable="false"/>
            </column>

            <column name="description" type="varchar2(100)" remarks="Описание формулы">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-416" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_formula_vars</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_formula_vars"
                schemaName="apps"
                tableName="calc_formula_vars"/>
    </changeSet>

    <changeSet id="calc-eug-417" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: calc_formula_vars</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="calc_formula_vars_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-418" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_formula_vars</comment>
        <createIndex indexName="idx_calc_formula_vars_1"
                     schemaName="apps"
                     tableName="calc_formula_vars"
                     unique="false">
            <column name="formula_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-419" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_vars to calc_formulas</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_vars"
                baseColumnNames="formula_id"
                constraintName="fk_calc_formula_vars_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formulas"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-420" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_formula_var_det</comment>
        <createTable tableName="calc_formula_var_det" schemaName="apps" remarks="Расшифровка для конкретного компонента формулы">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="formula_id" type="number" remarks="Идентификатор формулы">
                <constraints nullable="false"/>
            </column>

            <column name="formula_var_id" type="number" remarks="Идентификатор компонента формулы">
                <constraints nullable="false"/>
            </column>

            <column name="metering_point_id" type="number" remarks="Идентификатор точки учёта">
                <constraints nullable="false"/>
            </column>

            <column name="param_id" type="number" remarks="Идентификатор параметра">
                <constraints nullable="false"/>
            </column>

            <column name="rate" type="number" remarks="Множитель">
                <constraints nullable="false"/>
            </column>

            <column name="sign" type="varchar2(1)" remarks="Знак">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-421" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_formula_var_det</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_calc_formula_var_det"
                schemaName="apps"
                tableName="calc_formula_var_det"/>
    </changeSet>

    <changeSet id="calc-eug-422" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: pk_calc_formula_var_det</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="pk_calc_formula_var_det_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="calc-eug-423" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: pk_calc_formula_var_det</comment>
        <createIndex indexName="idx_pk_calc_formula_var_det_1"
                     schemaName="apps"
                     tableName="calc_formula_var_det"
                     unique="false">
            <column name="formula_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-424" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: pk_calc_formula_var_det</comment>
        <createIndex indexName="idx_pk_calc_formula_var_det_2"
                     schemaName="apps"
                     tableName="calc_formula_var_det"
                     unique="false">
            <column name="formula_var_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-425" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: pk_calc_formula_var_det</comment>
        <createIndex indexName="idx_pk_calc_formula_var_det_3"
                     schemaName="apps"
                     tableName="calc_formula_var_det"
                     unique="false">
            <column name="metering_point_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-426" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: pk_calc_formula_var_det</comment>
        <createIndex indexName="idx_pk_calc_formula_var_det_4"
                     schemaName="apps"
                     tableName="calc_formula_var_det"
                     unique="false">
            <column name="param_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-427" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_det to calc_formulas</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_det"
                baseColumnNames="formula_id"
                constraintName="fk_calc_formula_var_det_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formulas"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-428" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_det to calc_formula_vars</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_det"
                baseColumnNames="formula_var_id"
                constraintName="fk_calc_formula_var_det_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_vars"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-429" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_det to dict_metering_points</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_det"
                baseColumnNames="metering_point_id"
                constraintName="fk_calc_formula_var_det_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_metering_points"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-430" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_det to dict_params</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_det"
                baseColumnNames="param_id"
                constraintName="fk_calc_formula_var_det_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_parameters"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-431" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_formula_signs</comment>
        <createTable tableName="calc_formula_signs" schemaName="apps" remarks="Операции для обработки формул">
            <column name="code" type="varchar(10)" remarks="Операция">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-432" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_formula_signs</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_calc_formula_signs"
                schemaName="apps"
                tableName="calc_formula_signs"/>
    </changeSet>

    <changeSet id="calc-eug-433" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_var_det to calc_formula_signs</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_var_det"
                baseColumnNames="sign"
                constraintName="fk_calc_formula_var_det_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_signs"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-434" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_formula_types</comment>
        <createTable tableName="calc_formula_types" schemaName="apps" remarks="Типы формул">
            <column name="code" type="varchar(10)" remarks="Операция">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-435" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_formula_types</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_calc_formula_types"
                schemaName="apps"
                tableName="calc_formula_types"/>
    </changeSet>

    <changeSet id="calc-eug-436" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formulas to calc_formula_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formulas"
                baseColumnNames="formula_type"
                constraintName="fk_calc_formulas_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-437" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: calc_formula_types_tl</comment>
        <createTable tableName="calc_formula_types_tl" schemaName="apps" remarks="Типы формул  - переводы">
            <column name="code" type="varchar(10)" remarks="Операция">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Описание типа формулы">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="calc-eug-438" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: calc_formula_types_tl</comment>
        <addPrimaryKey
                columnNames="code, lang"
                constraintName="pk_calc_formula_types_tl"
                schemaName="apps"
                tableName="calc_formula_types_tl"/>
    </changeSet>

    <changeSet id="calc-eug-439" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formula_types_tl to calc_formula_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formula_types_tl"
                baseColumnNames="code"
                constraintName="fk_calc_formula_types_tl_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_formula_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-440" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_formulas</comment>
        <addColumn tableName="calc_formulas" schemaName="apps">
            <column name="text_dialog" type="varchar2(3000)" remarks="XML-представление формулы, созданной в диалоговом режиме">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-441" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_balance_subst_headers</comment>
        <addColumn tableName="calc_balance_subst_headers" schemaName="apps">
            <column name="org_id" type="number" remarks="Ид филиала" defaultValue="11">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-442" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table: calc_balance_subst_headers</comment>
        <addColumn tableName="calc_bs_result_headers" schemaName="apps">
            <column name="org_id" type="number" remarks="Ид филиала" defaultValue="11">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-443" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Drop not null constraint for table: calc_bs_result_mr_lines</comment>
        <dropNotNullConstraint tableName="calc_bs_result_mr_lines" schemaName="apps" columnName="meter_id" />
    </changeSet>

    <changeSet id="calc-eug-444" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Drop not null constraint for table: calc_bs_result_mr_lines</comment>
        <dropForeignKeyConstraint baseTableName="calc_bs_result_mr_lines" baseTableSchemaName="apps" constraintName="fk_calc_bs_result_mr_lines_3" />
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-445" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_mr_lines to dict_meters</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_mr_lines"
                baseColumnNames="meter_id"
                constraintName="fk_calc_bs_result_mr_lines_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="mdfem_eem_base"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-446" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_balance_subst_headers</comment>
        <createIndex indexName="idx_calc_balance_subst_headers_2"
                     schemaName="apps"
                     tableName="calc_balance_subst_headers"
                     unique="false">
            <column name="org_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-447" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_headers</comment>
        <createIndex indexName="idx_calc_bs_result_headers_4"
                     schemaName="apps"
                     tableName="calc_bs_result_headers"
                     unique="false">
            <column name="org_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-448" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_balance_subst_headers to dict_organizations</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_balance_subst_headers"
                baseColumnNames="org_id"
                constraintName="fk_calc_balance_subst_headers_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_organizations"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-449" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_headers to dict_organizations</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_headers"
                baseColumnNames="org_id"
                constraintName="fk_calc_bs_result_headers_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_organizations"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-450" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop columns from table: calc_reactor_values</comment>
        <dropColumn tableName="calc_reactor_values" schemaName="apps" >
            <column name="calc_date" />
            <column name="status" />
            <column name="interval" />
            <column name="version" />
            <column name="source_type_id" />
            <column name="batch_id" />
            <column name="param_id" />
        </dropColumn>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-451" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table calc_reactor_values</comment>
        <addColumn tableName="calc_reactor_values" schemaName="apps">
            <column name="bs_result_header_id" type="number" remarks="Идентификатор заголовка результата расчёта" defaultValue="1">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-452" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_reactor_values</comment>
        <createIndex indexName="idx_calc_reactor_values_4"
                 schemaName="apps"
                 tableName="calc_reactor_values"
                 unique="false">
            <column name="bs_result_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-453" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_reactor_values to bs_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_reactor_values"
                baseColumnNames="bs_result_header_id"
                constraintName="fk_calc_reactor_values_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_bs_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="calc-eug-454" logicalFilePath="path-independent" author="eugene" context="dev" failOnError="false">
        <comment>Drop columns from table: calc_power_transformer_values</comment>
        <dropColumn tableName="calc_power_transformer_values" schemaName="apps" >
            <column name="calc_date" />
            <column name="status" />
            <column name="interval" />
            <column name="version" />
            <column name="source_type_id" />
            <column name="batch_id" />
            <column name="param_id" />
        </dropColumn>
        <rollback/>
    </changeSet>

    <changeSet id="calc-eug-455" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding column to table calc_power_transformer_values</comment>
        <addColumn tableName="calc_power_transformer_values" schemaName="apps">
            <column name="bs_result_header_id" type="number" remarks="Идентификатор заголовка результата расчёта" defaultValue="1">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-456" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_power_transformer_values</comment>
        <createIndex indexName="idx_calc_power_transformer_values_7"
                 schemaName="apps"
                 tableName="calc_power_transformer_values"
                 unique="false">
            <column name="bs_result_header_id" type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-457" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_power_transformer_values to bs_result_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_power_transformer_values"
                baseColumnNames="bs_result_header_id"
                constraintName="fk_calc_power_transformer_values_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_bs_result_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="calc-eug-458" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding columns to table: calc_formulas</comment>
        <addColumn tableName="calc_formulas" schemaName="apps">
            <column name="period_type" type="varchar2(20)" remarks="Тип периода" defaultValue="D">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="calc-eug-459" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_formulas</comment>
        <createIndex indexName="idx_calc_formulas_3"
                     schemaName="apps"
                     tableName="calc_formulas"
                     unique="false">
            <column name="period_type" type="varchar2(20)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-460" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_formulas to calc_period_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_formulas"
                baseColumnNames="period_type"
                constraintName="fk_calc_formulas_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="calc_period_types"
                referencedColumnNames="code"
        />
    </changeSet>


    <changeSet id="calc-eug-461" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating index: calc_bs_result_headers</comment>
        <createIndex indexName="idx_calc_bs_result_headers_5"
                     schemaName="apps"
                     tableName="calc_bs_result_headers"
                     unique="false">
            <column name="status" type="varchar2(30)"/>
        </createIndex>
    </changeSet>

    <changeSet id="calc-eug-462" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: calc_bs_result_headers to media_batch_statuses</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="calc_bs_result_headers"
                baseColumnNames="status"
                constraintName="fk_calc_bs_result_headers_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="media_batch_statuses"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="calc-eug-463" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Adding columns to table: calc_balance_subst_mr_lines</comment>
        <addColumn tableName="calc_balance_subst_mr_lines" schemaName="apps">
            <column name="under_count_val" type="number" remarks="Недоучёт">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>


</databaseChangeLog>

